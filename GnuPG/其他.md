## 显示 Key ID
`gpg --list-keys` 或 `gpg --list-secret-keys` 不显示key ID,最新版的 `gpg -k` 等指令默认不显示 key ID 了，需要添加一项参数 `--keyid-format short`，其中short可在 `none | short | 0xshort| long | 0xlong` 中选择,对应不同的 key ID 长度 `gpg -k --keyid-format short`
## 能否从公钥服务器删除公钥
不能，将 Key 上传至 Key Server 基本上是一个不可逆的行为，即使你吊销了 Key 或者 Key 过期了， Key Server 会将该 Key 标记为已吊销或者已过期，但不会删除。因为 Key Server 之间是同步的，一旦你将 Key 传到一个 Key Server 上之后，该 Key 不久便会被同步到世界各地的 Key Server 上去。基本上就不可删除了。
## GPG常规安全流程
基本思想：主私钥只保留签名功能，平时离线保存不使用，仅使用子密钥，若子密钥泄露则单独吊销子密钥。
1.  创建主密钥对, `gpg --full-gen-key --expert` 使用完全版密钥生成，并启用更多参数调整。取消主密钥SAE功能，仅保留C功能，使用时间可以是永久。
2.  创建子私钥,可使用ECC算法+Curve 25519曲线，分别创建S，A，E功能的子私钥，使用时间几年即可
3.  导出所有子私钥 subkeys，所有私钥 allkeys，吊销证书 revoke 三个文件（不用公钥）使用智能卡或U盘等离线备份 allkeys，revoke 文件，原文件记得删
4.  删除所有私钥（不删公钥）
5.  导入子私钥文件 subkeys,若再次用`-K`参数列出私钥，可以看到主密钥私钥一行 `sec` 后有了一个 `#` 字符，这说明在本设备上缺失主密钥的私钥，也即成功离线备份了主密钥的私钥。
6.  发布公钥,上传公钥到服务器
## 指定 GnuPG 的主目录
用于指定 GnuPG 的主目录（home directory）。GnuPG 的主目录是存储密钥环（公钥和私钥）、配置文件以及其他相关数据的地方。默认情况下，GnuPG 的主目录是 `~/.gnupg`（即用户主目录下的 `.gnupg` 文件夹）。
- --homedir 指定主目录
- -- command 要执行的 gpg 命令
## 公钥服务器
hkp(HTTP Keyserver Protocol)：[http密钥服务器协议](https://tools.ietf.org/html/draft-shaw-openpgp-hkp-00),公钥服务器可以通过交换机制同步新上传的公钥,公钥服务器没有检查机制，任何人都可以用你的名义上传公钥，所以没有办法保证服务器上的公钥的可靠性,一般可以通过公钥的指纹来核对，但是指纹也会被伪造
## 配置文件
默认的配置文件是 `~/.gnupg/gpg.conf` 和 `~/.gnupg/dirmngr.conf`. 不会自动创建，需要手动创建并添加需要的配置
```bash
# 创建配置文件
gpg.conf

# 添加如下内容
################################################################################
# GnuPG View Options

# 显示keyId 16位 16进制数字
# Select how to display key IDs. "long" is the more accurate (but less 
# convenient) 16-character key ID. Add an "0x" to include an "0x" at the 
# beginning of the key ID. 
keyid-format 0xlong

# 显示指纹标识
# List all keys with their fingerprints. This is the same output as --list-keys 
# but with the additional output of a line with the fingerprint. If this 
# command is given twice, the fingerprints of all secondary keys are listed too.
with-fingerprint

# 保存退出
```
## gpg-agent 重启
```
gpg-connect-agent /bye
```