# 开源许可证选择与分析指南

开源许可证（Open Source License）是一种法律协议，旨在明确软件作者授予用户的使用、修改和分发权利。若不附带许可证，软件代码默认受版权法保护，他人无权使用或修改。

本文档提供了主流开源许可证的详细分析、选择指南及法律风险提示，帮助开发者和企业做出正确决策。

## 1. 许可证分类谱系

根据限制条件的严格程度，开源许可证可分为四大类：

### 1.1 公共领域 (Public Domain) - 放弃版权
*   **特征**：作者放弃所有权利（版权、专利权等），任何人可做任何事。
*   **代表**：
    *   **Unlicense**：极简，明确放弃版权。
    *   **CC0 (Creative Commons Zero)**：适用于数据、内容和软件，在全球范围内放弃版权。

### 1.2 宽松式 (Permissive) - 极简限制
*   **特征**：允许闭源商业使用。核心要求通常只是“保留版权声明”。
*   **代表**：
    *   **MIT**：最流行、最短小。只要求保留版权声明。
    *   **BSD-2-Clause**：与 MIT 几乎一致。
    *   **BSD-3-Clause**：比 2-Clause 多一条：禁止使用作者名号进行推广。
    *   **Apache 2.0**：现代宽松协议首选。除了保留声明外，还包含**明确的专利授权条款**（防止专利流氓）和商标使用限制。

### 1.3 弱 Copyleft (Weak Copyleft) - 组件级开源
*   **特征**：通常用于类库。允许链接（Link）该库的专有软件保持闭源，但对库本身的修改必须开源。
*   **代表**：
    *   **LGPL (GNU Lesser GPL)**：动态链接（DLL/So）可闭源；静态链接或修改代码需开源。
    *   **MPL (Mozilla Public License)**：**文件级** Copyleft。修改了该许可证下的文件需开源，但同一项目中的新文件可闭源。
    *   **EPL (Eclipse Public License)**：商业友好。核心逻辑类似 LGPL，但对专利报复有更强防御。

### 1.4 强 Copyleft (Strong Copyleft) - 传染性开源
*   **特征**：**传染性 (Viral)**。如果你的软件使用了该协议的代码（复制、静态链接等），整个软件必须以相同协议开源。
*   **代表**：
    *   **GPLv2**：经典的强 Copyleft。Linux 内核使用此协议。
    *   **GPLv3**：在 v2 基础上增加了**反 Tivoization**（防止硬件锁死软件）和明确的专利条款。注意：GPLv2 和 GPLv3 默认不兼容。

### 1.5 网络 Copyleft (Network Copyleft) - SaaS 级开源
*   **特征**：堵上了“云服务不分发就不开源”的漏洞。
*   **代表**：
    *   **AGPL (Affero GPL)**：只要通过网络与用户交互（SaaS），就必须向用户提供源代码。

---

## 2. 核心许可证详细对比

| 许可证 | 类型 | 商业闭源 | 专利授权 | 声明义务 | 传染性 | 适用场景 |
| :--- | :--- | :---: | :---: | :---: | :---: | :--- |
| **MIT** | 宽松 | ✅ | ❌(隐含) | ✅ | 无 | 简单、短小的工具库 |
| **BSD-3** | 宽松 | ✅ | ❌(隐含) | ✅ | 无 | 不希望名字被滥用 |
| **Apache 2.0** | 宽松 | ✅ | ✅(明确) | ✅ | 无 | 大型商业开源项目 (如 K8s, TensorFlow) |
| **MPL** | 弱 Copyleft | ⚠️(仅混合) | ✅ | ✅ | 文件级 | 混合开发，希望修改回馈社区 |
| **LGPL** | 弱 Copyleft | ⚠️(仅链接) | ✅ | ✅ | 库级 | 通用类库 (如 FFmpeg, glibc) |
| **GPLv3** | 强 Copyleft | ❌ | ✅ | ✅ | 项目级 | Linux应用，强迫衍生品开源 |
| **AGPL** | 网络 Copyleft | ❌ | ✅ | ✅ | 服务级 | Web 服务，防止云厂商白嫖 |

---

## 3. 如何选择？(决策指南)

请根据你的核心诉求选择：

1.  **我不管，只要别来烦我**：
    *   👉 **MIT** (最简单)
2.  **我关心专利风险，或者这是个大项目**：
    *   👉 **Apache 2.0** (推荐，法律条文严谨)
3.  **我不允许别人用我的名义做广告**：
    *   👉 **BSD-3-Clause**
4.  **这是个库，我允许别人闭源链接使用，但修改库本身要开源**：
    *   👉 **LGPL** (如果是 C/C++ 等编译型语言)
    *   👉 **MPL** (更适合混合文件开发)
5.  **我痛恨私有软件，所有用我代码的人都必须开源**：
    *   👉 **GPLv3**
6.  **我看这些云厂商不爽，他们拿我代码做 SaaS 赚钱却不回馈**：
    *   👉 **AGPL**

---

## 4. 常见法律与合规问题

### 4.1 "分发" (Distribution) 的定义
除了 AGPL 外，绝大多数开源协议（GPL, MIT 等）的触发条件是“分发”。
*   **公司内部使用**：不视为分发，无需开源。
*   **SaaS (云服务)**：用户通过浏览器访问服务器，**不视为分发**。因此，用 GPL 代码做后端服务通常不需要开源（除非使用 AGPL）。
*   **App/客户端**：用户下载到本地运行，**视为分发**。

### 4.2 GPL 违规的后果
*   **停止侵害 (Injunction)**：法院最常见的判决是要求违规方停止分发软件，直到合规。
*   **损害赔偿**：需赔偿版权方损失。
*   **强制开源 (Specific Performance)**：
    *   传统观点认为法院不会“强迫”你写代码或公开代码，只会让你“停用”。
    *   **最新趋势**：近期案例（如 *SFC v. Vizio*）显示，美国法院开始倾向于将 GPL 视为合同，可能支持“强制履行”条款，即强制要求违规方公开源代码。**风险正在上升**。

### 4.3 许可证兼容性
*   **单向流动**：代码通常只能从“宽松”流向“严格”。
    *   ✅ MIT 代码 -> 用于 GPL 项目。
    *   ❌ GPL 代码 -> 用于 MIT 项目（会导致整个项目变 GPL）。
*   **GPLv2 与 GPLv3**：
    *   除非声明了 "GPLv2 or later"，否则 v2 和 v3 代码**不兼容**，不能合并在同一个文件中。

### 4.4 专利报复条款 (Patent Retaliation)
Apache 2.0 和 GPLv3 等现代协议包含“专利报复”条款：如果使用者因为专利问题起诉贡献者，那么使用者获得的专利授权自动终止。这对防御专利流氓非常有效。
