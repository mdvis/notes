| åŠŸèƒ½æè¿°          | APT/dpkg                  | DNF/RPM                        | Pacman                           |
| :------------ | :------------------------ | :----------------------------- | :------------------------------- |
| **æ ¸å¿ƒå·¥å…·ç±»å‹**    | `dpkg` (ä½çº§), `apt` (é«˜çº§)   | `rpm` (ä½çº§), `dnf` (é«˜çº§)         | `pacman` (å…¼å…·é«˜ä½çº§)                 |
| **å®‰è£…æœ¬åœ°åŒ…**     | `sudo dpkg -i pkg.deb`    | `sudo rpm -ivh pkg.rpm`        | `sudo pacman -U pkg.pkg.tar.zst` |
| **å®‰è£…ä»“åº“åŒ…**     | `sudo apt install pkg`    | `sudo dnf install pkg`         | `sudo pacman -S pkg`             |
| **å¸è½½åŒ…**       | `sudo apt remove pkg`     | `sudo dnf remove pkg`          | `sudo pacman -R pkg`             |
| **å¸è½½åŒ…åŠä¾èµ–**    | `sudo apt autoremove pkg` | `sudo dnf autoremove pkg`      | `sudo pacman -Rs pkg`            |
| **æ›´æ–°è½¯ä»¶æºåˆ—è¡¨**   | `sudo apt update`         | `sudo dnf check-update`        | `sudo pacman -Sy`                |
| **å‡çº§æ‰€æœ‰è½¯ä»¶**    | `sudo apt upgrade`        | `sudo dnf upgrade`             | `sudo pacman -Syu`               |
| **æœç´¢è½¯ä»¶åŒ…**     | `apt search pattern`      | `dnf search pattern`           | `pacman -Ss pattern`             |
| **æŸ¥çœ‹åŒ…ä¿¡æ¯**     | `apt show pkg`            | `dnf info pkg`                 | `pacman -Si pkg`                 |
| **åˆ—å‡ºå·²å®‰è£…åŒ…**    | `dpkg -l`                 | `rpm -qa` `dnf list installed` | `pacman -Q`                      |
| **æŸ¥è¯¢æ–‡ä»¶å±äºå“ªä¸ªåŒ…** | `dpkg -S /path/to/file`   | `rpm -qf /path/to/file`        | `pacman -Qo /path/to/file`       |
| **åˆ—å‡ºåŒ…å†…æ–‡ä»¶**    | `dpkg -L pkg`             | `rpm -ql pkg`                  | `pacman -Ql pkg`                 |
| **æ¸…ç†åŒ…ç¼“å­˜**     | `sudo apt clean`          | `sudo dnf clean all`           | `sudo pacman -Sc`                |
| **æŸ¥æ‰¾å­¤å„¿åŒ…**     | `deborphan` (éœ€å®‰è£…)         | `sudo dnf autoremove`          | `pacman -Qdtq`                   |



## apt

- **æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨**ï¼š
```bash
sudo apt update
```
æ­¤å‘½ä»¤ç”¨äºä»è½¯ä»¶æºè·å–æœ€æ–°çš„è½¯ä»¶åŒ…ä¿¡æ¯ã€‚
- **å‡çº§å·²å®‰è£…çš„è½¯ä»¶åŒ…**ï¼š
```bash
sudo apt upgrade
```
è¯¥å‘½ä»¤ä¼šå°†å·²å®‰è£…çš„è½¯ä»¶åŒ…æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚
- **å®‰è£…è½¯ä»¶åŒ…**ï¼š
```bash
sudo apt install <package_name>
```
ç”¨è½¯ä»¶åŒ…åç§°æ›¿æ¢ `<package_name>` æ¥å®‰è£…æŒ‡å®šè½¯ä»¶åŒ…ã€‚
- **ç§»é™¤è½¯ä»¶åŒ…**ï¼š
```bash
sudo apt remove <package_name>
```
è¿™ä¼šç§»é™¤æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼Œä½†ä¼šä¿ç•™é…ç½®æ–‡ä»¶ã€‚
- **å½»åº•ç§»é™¤è½¯ä»¶åŒ…**ï¼š
```bash
sudo apt purge <package_name>
```
æ­¤å‘½ä»¤ä¸ä»…ç§»é™¤è½¯ä»¶åŒ…ï¼Œè¿˜ä¼šåˆ é™¤å…¶é…ç½®æ–‡ä»¶ã€‚
- **è‡ªåŠ¨æ¸…ç†ä¸å†éœ€è¦çš„ä¾èµ–åŒ…**ï¼š
```bash
sudo apt autoremove
```



## dnf

å¤ªæ£’äº† âœ…  
ä»¥ä¸‹æ˜¯æ•´åˆåçš„å®Œæ•´ç‰ˆï¼š

---

# ğŸ§® DNF åŒ…ç®¡ç†å‘½ä»¤ç´¢å¼•é€ŸæŸ¥å¤§å…¨

_(é€‚ç”¨ Fedora / RHEL / CentOS Stream / Rocky / AlmaLinux)_

ä¸ºè¿ç»´ã€å¼€å‘ä¸ Linux é«˜çº§ç”¨æˆ·å‡†å¤‡çš„ç»“æ„åŒ–å‘½ä»¤ç´¢å¼•ï¼Œ  
æ¶µç›– DNF çš„å…¨éƒ¨æ ¸å¿ƒä¸æ‰©å±•åŠŸèƒ½ï¼ˆå« Coprã€æ¨¡å—åŒ–ã€è‡ªåŠ¨åŒ–ã€æ’ä»¶ç­‰ï¼‰ã€‚

---

## ğŸ—ï¸ ä¸€ã€åŸºç¡€å‘½ä»¤

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|å®‰è£…è½¯ä»¶åŒ…|`dnf install pkg`|
|å¸è½½è½¯ä»¶åŒ…|`dnf remove pkg`|
|é‡æ–°å®‰è£…åŒ…|`dnf reinstall pkg`|
|å®‰è£…æœ¬åœ°åŒ…|`dnf install ./file.rpm`|
|ä»…ä¸‹è½½ä¸å®‰è£…|`dnf download pkg`|
|å®‰è£…æºç æ„å»ºä¾èµ–|`dnf builddep pkg.spec`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **DNF (Dandified YUM)**ï¼šYUM çš„ç»§ä»»è€…ï¼Œæ›´å¿«ä¸”æ”¯æŒä¾èµ–äº‹åŠ¡ç®¡ç†ä¸æ’ä»¶æ‰©å±•ã€‚
    
- **è½¯ä»¶åŒ…ï¼ˆPackageï¼‰**ï¼šä¸€ä¸ª `.rpm` æ–‡ä»¶æˆ–ä»“åº“ä¸­çš„ç¨‹åºé›†åˆã€‚
    
- **æºç åŒ…ï¼ˆSRPMï¼‰**ï¼šåŒ…å«æºç å’Œæ„å»ºä¿¡æ¯çš„ RPM åŒ…ï¼Œç”¨äºæœ¬åœ°ç¼–è¯‘æˆ–æ‰“åŒ…ã€‚
    

---

## ğŸ” äºŒã€æŸ¥è¯¢ä¸æœç´¢

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|æŒ‰å…³é”®å­—æœç´¢åŒ…|`dnf search keyword`|
|æŸ¥çœ‹åŒ…è¯¦æƒ…|`dnf info pkg`|
|æŸ¥çœ‹å·²å®‰è£…åŒ…|`dnf list installed`|
|æŸ¥çœ‹å¯ç”¨åŒ…|`dnf list available`|
|æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬|`dnf list --showduplicates pkg`|
|æŸ¥æ‰¾æ–‡ä»¶å½’å±|`dnf provides /usr/bin/file`|
|æŸ¥è¯¢åŒ…ä¸­åŒ…å«çš„æ–‡ä»¶|`dnf repoquery -l pkg`|
|æŸ¥çœ‹åŒ…çš„ä¾èµ–|`dnf repoquery --requires pkg`|
|æŸ¥çœ‹ä¾èµ–è¯¥åŒ…çš„åŒ…|`dnf repoquery --whatrequires pkg`|
|æŸ¥çœ‹ä¾èµ–æ ‘|`dnf repoquery --tree-requires pkg`|
|æŸ¥è¯¢åº“æ–‡ä»¶æ¥æº|`dnf repoquery --whatprovides libfoo.so.1`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **repoquery**ï¼šæŸ¥è¯¢ä»“åº“ä¸­åŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä¾èµ–ã€æä¾›ã€ç‰ˆæœ¬ç­‰ï¼‰ã€‚
    
- **provides / whatprovides**ï¼šæ˜¾ç¤ºå“ªä¸ªåŒ…æä¾›æŒ‡å®šæ–‡ä»¶æˆ–åº“ã€‚
    
- **requires / whatrequires**ï¼šåˆ†æä¾èµ–å…³ç³»ï¼Œäº†è§£åŒ…é—´ç›¸äº’ä¾èµ–ã€‚
    

---

## â¬†ï¸ ä¸‰ã€ç³»ç»Ÿæ›´æ–°ä¸å‡çº§

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|æ£€æŸ¥å¯æ›´æ–°è½¯ä»¶|`dnf check-update`|
|æ›´æ–°æ‰€æœ‰åŒ…|`dnf upgrade`|
|æ›´æ–°æŒ‡å®šåŒ…|`dnf upgrade pkg`|
|åŒæ­¥ç³»ç»ŸåŒ…ç‰ˆæœ¬|`dnf distro-sync`|
|ä»…ä¸‹è½½æ›´æ–°|`dnf upgrade --downloadonly`|
|è‡ªåŠ¨å›ç­” â€œyesâ€|`dnf upgrade -y`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **upgrade**ï¼šå‡çº§è½¯ä»¶åŒ…è‡³æœ€æ–°ç‰ˆæœ¬ï¼Œè‡ªåŠ¨è§£å†³ä¾èµ–ã€‚
    
- **distro-sync**ï¼šåŒæ­¥ç³»ç»ŸåŒ…ç‰ˆæœ¬ï¼Œä½¿æ‰€æœ‰åŒ…åŒ¹é…ä»“åº“ä¸­ç‰ˆæœ¬ï¼ˆä¿®å¤ç³»ç»Ÿä¸ä¸€è‡´çŠ¶æ€ï¼‰ã€‚
    

---

## ğŸ§© å››ã€ç¼“å­˜ä¸å…ƒæ•°æ®ç®¡ç†

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|æ¸…ç†æ‰€æœ‰ç¼“å­˜|`dnf clean all`|
|æ¸…ç†ä¸‹è½½çš„åŒ…|`dnf clean packages`|
|æ¸…ç†ä»“åº“å…ƒæ•°æ®|`dnf clean metadata`|
|ç”Ÿæˆç¼“å­˜|`dnf makecache`|
|æŸ¥çœ‹ç¼“å­˜ç›®å½•|`ls /var/cache/dnf`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **ç¼“å­˜ï¼ˆcacheï¼‰**ï¼šä¸‹è½½çš„åŒ…ã€ç´¢å¼•ã€å…ƒæ•°æ®å­˜æ”¾åœ¨ `/var/cache/dnf/`ã€‚
    
- **å…ƒæ•°æ®ï¼ˆmetadataï¼‰**ï¼šä»“åº“ä¸­å…³äºåŒ…çš„ç´¢å¼•ä¿¡æ¯ï¼Œç”¨äºå¿«é€ŸæŸ¥è¯¢æ›´æ–°ã€‚
    

---

## ğŸ“¦ äº”ã€è½¯ä»¶åŒ…ç»„ä¸ç¯å¢ƒç»„

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|åˆ—å‡ºç»„|`dnf group list`|
|æŸ¥çœ‹éšè—ç»„|`dnf group list --hidden`|
|æŸ¥çœ‹ç»„ä¿¡æ¯|`dnf group info "group"`|
|å®‰è£…ç»„|`dnf group install "group"`|
|åˆ é™¤ç»„|`dnf group remove "group"`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **åŒ…ç»„ï¼ˆGroupï¼‰**ï¼šåŠŸèƒ½ç›¸å…³çš„è½¯ä»¶é›†åˆï¼Œå¦‚â€œDevelopment Toolsâ€ã€‚
    
- **ç¯å¢ƒç»„ï¼ˆEnvironment Groupï¼‰**ï¼šç”±å¤šä¸ªåŒ…ç»„ç»„æˆï¼Œå¦‚â€œServer with GUIâ€ã€‚
    

---

## ğŸ§± å…­ã€æ¨¡å—åŒ–ï¼ˆModularityï¼‰

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|åˆ—å‡ºæ¨¡å—|`dnf module list`|
|æŸ¥çœ‹æ¨¡å—è¯¦æƒ…|`dnf module info php`|
|å¯ç”¨æ¨¡å—æµ|`dnf module enable php:7.4`|
|ç¦ç”¨æ¨¡å—æµ|`dnf module disable php`|
|é‡ç½®æ¨¡å—|`dnf module reset php`|
|å®‰è£…æ¨¡å—åŒ…|`dnf module install php:7.4/common`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **æ¨¡å—ï¼ˆModuleï¼‰**ï¼šæä¾›è½¯ä»¶çš„å¤šä¸ªç‰ˆæœ¬ï¼ˆæµï¼‰å¹¶è¡Œç®¡ç†ã€‚
    
- **æ¨¡å—æµï¼ˆStreamï¼‰**ï¼šç‰¹å®šç‰ˆæœ¬åˆ†æ”¯ï¼Œå¦‚ `php:7.4`ã€‚
    
- **å¯ç”¨ / ç¦ç”¨ / é‡ç½®**ï¼šæ§åˆ¶å½“å‰ç³»ç»Ÿå¯è§çš„æ¨¡å—æµçŠ¶æ€ã€‚
    

---

## ğŸ§° ä¸ƒã€Copr ä»“åº“ç®¡ç†ï¼ˆç¤¾åŒºæ„å»ºæºï¼‰

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|å¯ç”¨ Copr ä»“åº“|`dnf copr enable user/project`|
|ç¦ç”¨ Copr ä»“åº“|`dnf copr disable user/project`|
|åˆ é™¤ Copr ä»“åº“|`dnf copr remove user/project`|
|æŸ¥çœ‹ Copr ä¿¡æ¯|`dnf copr info user/project`|
|åˆ—å‡ºå¯ç”¨çš„ Copr ä»“åº“|`dnf copr list`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **Coprï¼ˆCool Other Package Repoï¼‰**ï¼šFedora å®˜æ–¹ç¤¾åŒºæ„å»ºå¹³å°ã€‚
    
- **Copr ä»“åº“**ï¼šç”±ä¸ªäººæˆ–å›¢é˜Ÿæ‰˜ç®¡çš„è½¯ä»¶æºï¼Œå¸¸ç”¨äºå‘å¸ƒå®éªŒæ€§æˆ–ç¬¬ä¸‰æ–¹åŒ…ã€‚
    

---

## ğŸ—ƒï¸ å…«ã€ä»“åº“ç®¡ç†ä¸é…ç½®

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|æŸ¥çœ‹å¯ç”¨ä»“åº“|`dnf repolist`|
|æŸ¥çœ‹æ‰€æœ‰ä»“åº“ï¼ˆå«ç¦ç”¨ï¼‰|`dnf repolist all`|
|æŸ¥çœ‹ä»“åº“è¯¦æƒ…|`dnf repoinfo`|
|å¯ç”¨æŒ‡å®šä»“åº“|`dnf config-manager --set-enabled repo`|
|ç¦ç”¨æŒ‡å®šä»“åº“|`dnf config-manager --set-disabled repo`|
|æ·»åŠ ä»“åº“|`dnf config-manager --add-repo URL`|
|ä¸´æ—¶å¯ç”¨ä»“åº“|`dnf --enablerepo=epel install htop`|
|ä¸´æ—¶ç¦ç”¨ä»“åº“|`dnf --disablerepo=baseos upgrade`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **ä»“åº“ï¼ˆRepositoryï¼‰**ï¼šåŒ…æ¥æºå®šä¹‰ï¼Œé€šå¸¸ä¸ºè¿œç¨‹é•œåƒæˆ–æœ¬åœ°è·¯å¾„ã€‚
    
- **EPEL ä»“åº“**ï¼šRed Hat ç³»åˆ—å¸¸ç”¨çš„é¢å¤–è½¯ä»¶åŒ…æºã€‚
    
- **config-manager æ’ä»¶**ï¼šç”¨äºå¯ç”¨ã€ç¦ç”¨æˆ–æ·»åŠ ä»“åº“é…ç½®ã€‚
    

---

## ğŸ•“ ä¹ã€å†å²ä¸äº‹åŠ¡æ§åˆ¶

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|æŸ¥çœ‹å†å²è®°å½•|`dnf history`|
|æŸ¥çœ‹æŸæ¬¡äº‹åŠ¡è¯¦æƒ…|`dnf history info ID`|
|æ’¤é”€æŒ‡å®šäº‹åŠ¡|`dnf history undo ID`|
|å›æ»šåˆ°ç‰¹å®šçŠ¶æ€|`dnf history rollback ID`|
|æŸ¥çœ‹ç”¨æˆ·å®‰è£…çš„åŒ…|`dnf history userinstalled`|
|æŸ¥çœ‹äº‹åŠ¡åŒ…å·®å¼‚|`dnf history diff ID1 ID2`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **äº‹åŠ¡ï¼ˆTransactionï¼‰**ï¼šä¸€æ¬¡å®‰è£…ã€å‡çº§æˆ–åˆ é™¤æ“ä½œçš„å®Œæ•´è¿‡ç¨‹ã€‚
    
- **å†å²è®°å½•ï¼ˆHistoryï¼‰**ï¼šDNF ä¿å­˜çš„äº‹åŠ¡æ—¥å¿—ï¼Œå¯ç”¨äºå›æ»šç³»ç»ŸçŠ¶æ€ã€‚
    

---

## ğŸ§® åã€ä¾èµ–ä¸åŒ…å…³ç³»åˆ†æ

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|æŸ¥çœ‹ä¾èµ–åˆ—è¡¨|`dnf deplist pkg`|
|æŸ¥çœ‹ä¾èµ–åŒ…|`dnf repoquery --requires pkg`|
|æŸ¥çœ‹åå‘ä¾èµ–|`dnf repoquery --whatrequires pkg`|
|æŸ¥çœ‹ä¾èµ–æ ‘|`dnf repoquery --tree-requires pkg`|
|æ£€æŸ¥ç³»ç»Ÿä¾èµ–å®Œæ•´æ€§|`dnf check`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **ä¾èµ–ï¼ˆDependencyï¼‰**ï¼šåŒ…è¿è¡Œæ‰€éœ€çš„å…¶ä»–åŒ…ã€‚
    
- **åå‘ä¾èµ–**ï¼šå“ªäº›åŒ…ä¾èµ–å½“å‰åŒ…ã€‚
    
- **check / deplist**ï¼šæ£€æµ‹ç³»ç»Ÿä¾èµ–å®Œæ•´æ€§ä¸åŒ…ä¾èµ–è¯¦æƒ…ã€‚
    

---

## ğŸ§¹ åä¸€ã€ç³»ç»Ÿç»´æŠ¤ä¸æ¸…ç†

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|åˆ é™¤æ— ç”¨ä¾èµ–|`dnf autoremove`|
|æ£€æŸ¥åŒ…ä¸€è‡´æ€§|`dnf check`|
|æ£€æŸ¥æŸåä¾èµ–|`dnf check --dependencies`|
|åˆ é™¤ç¼“å­˜å’Œæ—§åŒ…|`dnf clean all`|
|é‡å»ºç¼“å­˜|`dnf makecache`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **autoremove**ï¼šæ¸…ç†ä¸å†éœ€è¦çš„ä¾èµ–åŒ…ã€‚
    
- **check**ï¼šæ£€æµ‹åŒ…ä¸€è‡´æ€§å’Œä¾èµ–å…³ç³»æ˜¯å¦æŸåã€‚
    

---

## ğŸ” åäºŒã€ç‰ˆæœ¬é”ä¸å›ºå®š

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|é”å®šåŒ…ç‰ˆæœ¬|`dnf versionlock add pkg`|
|æŸ¥çœ‹é”å®šåˆ—è¡¨|`dnf versionlock list`|
|åˆ é™¤é”å®š|`dnf versionlock delete pkg`|
|æ¸…ç©ºæ‰€æœ‰é”å®š|`dnf versionlock clear`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **ç‰ˆæœ¬é”ï¼ˆVersion Lockï¼‰**ï¼šé˜²æ­¢åŒ…è¢«æ›´æ–°ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šã€‚
    
- **versionlock æ’ä»¶**ï¼šè´Ÿè´£æ·»åŠ ã€æŸ¥çœ‹å’Œç§»é™¤é”å®šé¡¹ã€‚
    

---

## ğŸªµ åä¸‰ã€æ—¥å¿—ä¸è°ƒè¯•

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|æŸ¥çœ‹æ—¥å¿—|`less /var/log/dnf.log`|
|è°ƒè¯•è¾“å‡ºç­‰çº§|`dnf -d 10 install pkg`|
|æ¨¡æ‹Ÿå®‰è£…|`dnf --assumeno install pkg`|
|æµ‹è¯•äº‹åŠ¡|`dnf --setopt=tsflags=test upgrade`|
|é™é»˜æ¨¡å¼|`dnf -q install pkg`|
|ä»…æ˜¾ç¤ºè¦æ‰§è¡Œçš„æ“ä½œ|`dnf -v upgrade`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **è°ƒè¯•ç­‰çº§ï¼ˆ-dï¼‰**ï¼šæ§åˆ¶è¾“å‡ºçš„è¯¦ç»†ç¨‹åº¦ã€‚
    
- **assumeno**ï¼šæ¨¡æ‹Ÿæ‰§è¡Œæ“ä½œè€Œä¸çœŸæ­£ä¿®æ”¹ç³»ç»Ÿã€‚
    
- **dnf.log**ï¼šæ‰€æœ‰æ“ä½œçš„æ—¥å¿—æ–‡ä»¶ï¼Œä½äº `/var/log/dnf.log`ã€‚
    

---

## âš™ï¸ åå››ã€é«˜çº§é€‰é¡¹ä¸å‚æ•°

|å‚æ•°|è¯´æ˜|
|---|---|
|`-y`|è‡ªåŠ¨å›ç­” yes|
|`--nobest`|å…è®¸å®‰è£…éæœ€é«˜ç‰ˆæœ¬|
|`--best`|å¼ºåˆ¶ä½¿ç”¨æœ€é«˜ç‰ˆæœ¬|
|`--skip-broken`|å¿½ç•¥ä¾èµ–å†²çª|
|`--allowerasing`|å…è®¸ç§»é™¤å†²çªåŒ…ä»¥è§£å†³ä¾èµ–|
|`--downloadonly`|ä»…ä¸‹è½½ä¸å®‰è£…|
|`--setopt=key=value`|ä¸´æ—¶ä¿®æ”¹é…ç½®|
|`--releasever=8`|æŒ‡å®šç³»ç»Ÿç‰ˆæœ¬å·ï¼ˆç”¨äº repoï¼‰|
|`--enablerepo` / `--disablerepo`|å¯ç”¨/ç¦ç”¨ä»“åº“|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **nobest / best**ï¼šæ§åˆ¶å®‰è£…ç‰ˆæœ¬é€‰æ‹©ç­–ç•¥ã€‚
    
- **skip-broken**ï¼šåœ¨æœ‰ä¾èµ–é—®é¢˜æ—¶ç»§ç»­æ‰§è¡Œæ“ä½œã€‚
    
- **setopt**ï¼šä¸´æ—¶è°ƒæ•´é…ç½®é¡¹ï¼Œæ— éœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚
    
å¤ªå¥½äº† âœ…  
ç»§ç»­ä¸ºä½ è¾“å‡ºå®Œæ•´ç‰ˆçš„åç»­éƒ¨åˆ† â€”â€”

---

# ğŸ§© DNF åŒ…ç®¡ç†å‘½ä»¤ç´¢å¼•é€ŸæŸ¥å¤§å…¨ï¼ˆä¸‹ç¯‡ï¼‰

_(ç¬¬åäº”ç«  ï½ ç¬¬äºŒåä¸€ç«  Â· å®Œæ•´æ‰©å±•ç‰ˆ)_

---

## ğŸ§  åäº”ã€æ’ä»¶ï¼ˆPluginsï¼‰ç®¡ç†

|åŠŸèƒ½|å‘½ä»¤|
|---|---|
|æŸ¥çœ‹å¯ç”¨æ’ä»¶|`dnf help plugins`|
|æŸ¥çœ‹å·²å¯ç”¨æ’ä»¶|`dnf -v` æˆ– `dnf repolist -v`|
|å¯ç”¨æŒ‡å®šæ’ä»¶|`dnf config-manager --setopt=pluginname=1`|
|ç¦ç”¨æŒ‡å®šæ’ä»¶|`dnf config-manager --setopt=pluginname=0`|
|æ’ä»¶é…ç½®æ–‡ä»¶ä½ç½®|`/etc/dnf/plugins/` æˆ– `/etc/dnf/plugins/*.conf`|

### ğŸ“˜ å¸¸ç”¨æ’ä»¶ä¸€è§ˆ

|æ’ä»¶å|åŠŸèƒ½è¯´æ˜|
|---|---|
|`versionlock`|é”å®šè½¯ä»¶åŒ…ç‰ˆæœ¬ï¼Œé˜²æ­¢å‡çº§|
|`config-manager`|ç®¡ç†ä»“åº“é…ç½®ï¼ˆå¯ç”¨/ç¦ç”¨/æ–°å¢ï¼‰|
|`copr`|ç®¡ç† Fedora Copr ä»“åº“|
|`reposync`|åŒæ­¥è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°é•œåƒ|
|`needs-restarting`|æ£€æŸ¥æ›´æ–°åæ˜¯å¦éœ€é‡å¯è¿›ç¨‹|
|`dnf-automatic`|å®šæ—¶è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿ|
|`download`|å•ç‹¬ä¸‹è½½åŒ…è€Œä¸å®‰è£…|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **æ’ä»¶ï¼ˆPluginï¼‰**ï¼šæ‰©å±• DNF åŠŸèƒ½çš„å°æ¨¡å—ã€‚
    
- **æ’ä»¶é…ç½®æ–‡ä»¶**ï¼šä½äº `/etc/dnf/plugins/`ï¼Œå¯å•ç‹¬å¯ç”¨æˆ–ç¦ç”¨ã€‚
    

---

## ğŸ”„ åå…­ã€è‡ªåŠ¨åŒ–ä¸è®¡åˆ’ä»»åŠ¡ï¼ˆDNF Automaticï¼‰

|åŠŸèƒ½|å‘½ä»¤ / é…ç½®æ–‡ä»¶|
|---|---|
|å®‰è£…è‡ªåŠ¨åŒ–å·¥å…·åŒ…|`dnf install dnf-automatic`|
|ä¸»é…ç½®æ–‡ä»¶è·¯å¾„|`/etc/dnf/automatic.conf`|
|å¯ç”¨è‡ªåŠ¨æ›´æ–°æœåŠ¡|`systemctl enable --now dnf-automatic.timer`|
|æŸ¥çœ‹æœåŠ¡çŠ¶æ€|`systemctl status dnf-automatic.timer`|
|æ‰‹åŠ¨è§¦å‘è‡ªåŠ¨æ›´æ–°|`systemctl start dnf-automatic.service`|
|æŸ¥çœ‹æ—¥å¿—è¾“å‡º|`journalctl -u dnf-automatic`|

### ğŸ“˜ é…ç½®å‚æ•°é€Ÿè§ˆï¼ˆ`/etc/dnf/automatic.conf`ï¼‰

|å‚æ•°å|è¯´æ˜|
|---|---|
|`upgrade_type=default`|å‡çº§ç±»å‹ï¼ˆ`default` / `security`ï¼‰|
|`apply_updates = yes`|æ˜¯å¦è‡ªåŠ¨åº”ç”¨æ›´æ–°|
|`download_updates = yes`|æ˜¯å¦ä»…ä¸‹è½½æ›´æ–°|
|`emit_via = motd/email`|é€šçŸ¥æ–¹å¼|
|`random_sleep = 360`|å»¶è¿Ÿæ‰§è¡Œä»¥å¹³è¡¡è´Ÿè½½|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **dnf-automatic**ï¼šè‡ªåŠ¨åŒ–æ›´æ–°å·¥å…·ï¼Œå¯è®¾å®šå®šæ—¶ä»»åŠ¡ã€‚
    
- **timer å•å…ƒ**ï¼šSystemd è®¡æ—¶å™¨ï¼Œç”¨äºå‘¨æœŸæ€§è§¦å‘æ›´æ–°ã€‚
    

---

## âš¡ åä¸ƒã€æ€§èƒ½ä¼˜åŒ–ä¸ä¸‹è½½åŠ é€Ÿ

|åŠŸèƒ½|å‘½ä»¤ / è®¾ç½®|
|---|---|
|å¹¶è¡Œä¸‹è½½ï¼ˆæ¨èï¼‰|åœ¨ `/etc/dnf/dnf.conf` æ·»åŠ ï¼š`max_parallel_downloads=10`|
|å¯ç”¨æœ€å¿«é•œåƒé€‰æ‹©|`fastestmirror=True`|
|è·³è¿‡æ…¢æºé‡è¯•æ¬¡æ•°|`retries=3`|
|ä»…ä¸‹è½½æ›´æ–°ï¼ˆä¸å®‰è£…ï¼‰|`dnf upgrade --downloadonly`|
|ä½¿ç”¨ delta RPMs|`deltarpm=True`|
|å…³é—­ delta RPMsï¼ˆèŠ‚çœ CPUï¼‰|`deltarpm=False`|

### ğŸ“˜ æ€§èƒ½ä¼˜åŒ–é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆ`/etc/dnf/dnf.conf`ï¼‰

```ini
[main]
gpgcheck=1
installonly_limit=3
clean_requirements_on_remove=True
fastestmirror=True
max_parallel_downloads=10
deltarpm=True
```

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **delta RPM**ï¼šä»…ä¸‹è½½å·®å¼‚æ•°æ®ï¼Œå‡å°‘å¸¦å®½ã€‚
    
- **fastestmirror**ï¼šè‡ªåŠ¨æ£€æµ‹æœ€å¿«é•œåƒæºã€‚
    
- **max_parallel_downloads**ï¼šå¹¶è¡Œä¸‹è½½æ•°ï¼Œæå‡é€Ÿåº¦ã€‚
    

---

## ğŸ§± åå…«ã€RPM ä½å±‚æ“ä½œä¸ DNF å¯¹ç…§

|åŠŸèƒ½|DNF å‘½ä»¤|å¯¹åº” RPM å‘½ä»¤|
|---|---|---|
|å®‰è£…åŒ…|`dnf install pkg`|`rpm -ivh pkg.rpm`|
|å‡çº§åŒ…|`dnf upgrade pkg`|`rpm -Uvh pkg.rpm`|
|å¸è½½åŒ…|`dnf remove pkg`|`rpm -e pkg`|
|æŸ¥è¯¢åŒ…|`dnf info pkg`|`rpm -qi pkg`|
|æŸ¥è¯¢æ–‡ä»¶å½’å±|`dnf provides file`|`rpm -qf file`|
|åˆ—å‡ºæ–‡ä»¶|`dnf repoquery -l pkg`|`rpm -ql pkg`|
|æ£€æŸ¥ä¾èµ–|`dnf check`|`rpm -Va`|
|éªŒè¯åŒ…ç­¾å|è‡ªåŠ¨å®Œæˆ|`rpm --checksig pkg`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **RPM**ï¼šRed Hat åŒ…ç®¡ç†åº•å±‚ç³»ç»Ÿã€‚
    
- **DNF**ï¼šRPM çš„é«˜å±‚å‰ç«¯ï¼Œè´Ÿè´£ä¾èµ–è§£æä¸äº‹åŠ¡ç®¡ç†ã€‚
    
- **rpm -Va**ï¼šéªŒè¯ç³»ç»Ÿä¸­åŒ…æ–‡ä»¶æ˜¯å¦è¢«ä¿®æ”¹ã€‚
    

---

## ğŸ§¾ åä¹ã€å®‰å…¨ä¸ç­¾åéªŒè¯

|åŠŸèƒ½|å‘½ä»¤ / æ–‡ä»¶è·¯å¾„|
|---|---|
|æ£€æŸ¥ GPG ç­¾åçŠ¶æ€|`dnf repoquery --requires gpg-pubkey`|
|å¯¼å…¥ GPG å¯†é’¥|`rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-*`|
|æŸ¥çœ‹ä»“åº“ç­¾åè®¾ç½®|`cat /etc/yum.repos.d/*.repo`|
|å¯ç”¨å…¨å±€ç­¾åéªŒè¯|åœ¨ `/etc/dnf/dnf.conf` ä¸­è®¾ç½® `gpgcheck=1`|
|æ£€æŸ¥åŒ…ç­¾å|`rpm -K pkg.rpm` æˆ– `rpm --checksig pkg.rpm`|
|æ£€æŸ¥ä»“åº“è¯ä¹¦ï¼ˆSSLï¼‰|`openssl s_client -connect mirror.repo:443`|

### ğŸ“˜ æœ¯è¯­ä¸æ¦‚å¿µè¯´æ˜

- **GPG ç­¾å**ï¼šç¡®ä¿è½¯ä»¶åŒ…æ¥æºå¯ä¿¡ã€å†…å®¹æœªç¯¡æ”¹ã€‚
    
- **gpgcheck=1**ï¼šå¼ºåˆ¶ DNF éªŒè¯æ‰€æœ‰åŒ…ç­¾åã€‚
    
- **repo GPG key**ï¼šä»“åº“æä¾›çš„å…¬é’¥æ–‡ä»¶ï¼Œç”¨äºéªŒè¯åŒ…åˆæ³•æ€§ã€‚
    

---

## ğŸ§® äºŒåã€æ—¥å¿—ä¸è·¯å¾„å‚è€ƒ

|ç±»å‹|è·¯å¾„æˆ–å‘½ä»¤|
|---|---|
|DNF æ“ä½œæ—¥å¿—|`/var/log/dnf.log`|
|å†å²äº‹åŠ¡æ•°æ®åº“|`/var/lib/dnf/history.sqlite`|
|ç¼“å­˜ç›®å½•|`/var/cache/dnf/`|
|ä»“åº“é…ç½®æ–‡ä»¶|`/etc/yum.repos.d/*.repo`|
|ä¸»é…ç½®æ–‡ä»¶|`/etc/dnf/dnf.conf`|
|æ’ä»¶é…ç½®ç›®å½•|`/etc/dnf/plugins/`|
|è‡ªåŠ¨åŒ–é…ç½®æ–‡ä»¶|`/etc/dnf/automatic.conf`|
|Copr æºå®šä¹‰æ–‡ä»¶|`/etc/yum.repos.d/_copr_*`|
|RPM æ•°æ®åº“è·¯å¾„|`/var/lib/rpm/`|

---

## ğŸ† äºŒåä¸€ã€Top 25 å®ç”¨å‘½ä»¤åˆé›†ï¼ˆå»ºè®®æ”¶è—ï¼‰

|ç±»å‹|å¸¸ç”¨å‘½ä»¤|
|---|---|
|å®‰è£…ä¸å¸è½½|`dnf install pkg` / `dnf remove pkg`|
|æ›´æ–°ç³»ç»Ÿ|`dnf upgrade -y`|
|æ¸…ç†ç¼“å­˜|`dnf clean all`|
|æœç´¢åŒ…|`dnf search keyword`|
|æŸ¥çœ‹åŒ…è¯¦æƒ…|`dnf info pkg`|
|æŸ¥çœ‹ä¾èµ–|`dnf deplist pkg`|
|å®‰è£…ç»„|`dnf group install "Development Tools"`|
|å¯ç”¨ä»“åº“|`dnf config-manager --set-enabled epel`|
|ç¦ç”¨ä»“åº“|`dnf config-manager --set-disabled repo`|
|å¯ç”¨æ¨¡å—æµ|`dnf module enable php:7.4`|
|æŸ¥çœ‹å†å²|`dnf history`|
|å›æ»šäº‹åŠ¡|`dnf history rollback ID`|
|è‡ªåŠ¨æ¸…ç†æ— ç”¨åŒ…|`dnf autoremove`|
|ä¸‹è½½åŒ…ä½†ä¸å®‰è£…|`dnf download pkg`|
|åŒæ­¥ç³»ç»ŸçŠ¶æ€|`dnf distro-sync`|
|å¯ç”¨ Copr æº|`dnf copr enable user/project`|
|é”å®šç‰ˆæœ¬|`dnf versionlock add pkg`|
|æ¨¡æ‹Ÿæ‰§è¡Œ|`dnf --assumeno install pkg`|
|æŸ¥çœ‹ç¼“å­˜è·¯å¾„|`ls /var/cache/dnf`|
|æŸ¥çœ‹æ—¥å¿—|`less /var/log/dnf.log`|
|æ£€æŸ¥æ›´æ–°|`dnf check-update`|
|æŸ¥çœ‹æ–‡ä»¶æ¥æº|`dnf provides /usr/bin/foo`|
|æŸ¥çœ‹å·²å®‰è£…åŒ…|`dnf list installed`|
|æŸ¥çœ‹ä»“åº“è¯¦æƒ…|`dnf repoinfo`|
|ç”Ÿæˆç¼“å­˜|`dnf makecache`|

---

## ğŸ“š é™„å½•ï¼šé…ç½®ä¸è°ƒä¼˜å»ºè®®

```ini
# /etc/dnf/dnf.conf æ¨èé…ç½®
[main]
gpgcheck=1
installonly_limit=3
clean_requirements_on_remove=True
fastestmirror=True
max_parallel_downloads=10
deltarpm=True
```


## pacman

- **åŒæ­¥è½¯ä»¶åŒ…æ•°æ®åº“å¹¶å‡çº§æ‰€æœ‰è½¯ä»¶åŒ…**ï¼š
```bash
sudo pacman -Syu
```
æ­¤å‘½ä»¤ä¼šåŒæ­¥è½¯ä»¶åŒ…æ•°æ®åº“å¹¶å°†æ‰€æœ‰å¯å‡çº§çš„è½¯ä»¶åŒ…å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚
- **å®‰è£…è½¯ä»¶åŒ…**ï¼š
```bash
sudo pacman -S <package_name>
```
ä½¿ç”¨è½¯ä»¶åŒ…åç§°æ›¿æ¢ `<package_name>` æ¥å®‰è£…è½¯ä»¶ã€‚
- **ç§»é™¤è½¯ä»¶åŒ…**ï¼š
```bash
sudo pacman -R <package_name>
```
æ­¤å‘½ä»¤ç”¨äºç§»é™¤æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼Œä½†ä¼šä¿ç•™ä¾èµ–å®ƒçš„å…¶ä»–è½¯ä»¶åŒ…ã€‚
- **å½»åº•ç§»é™¤è½¯ä»¶åŒ…åŠå…¶ä¾èµ–**ï¼š
```bash
sudo pacman -Rs <package_name>
```
è¿™ä¼šç§»é™¤æŒ‡å®šè½¯ä»¶åŒ…åŠå…¶ä¸å†è¢«å…¶ä»–è½¯ä»¶ä¾èµ–çš„ä¾èµ–åŒ…ã€‚
- **æŸ¥æ‰¾è½¯ä»¶åŒ…**ï¼š
```bash
sudo pacman -Ss <keyword>
```
ç”¨å…³é”®è¯æ›¿æ¢ `<keyword>` æ¥æŸ¥æ‰¾åŒ…å«è¯¥å…³é”®è¯çš„è½¯ä»¶åŒ…ã€‚ 

### mise å¸¸ç”¨å‘½ä»¤

miseï¼ˆä»¥å‰ç§°ä¸º rtxï¼‰æ˜¯ä¸€ä¸ªå¤šè¯­è¨€ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œç”¨äºç®¡ç†å¦‚ Node.jsã€Python ç­‰ç¼–ç¨‹è¯­è¨€çš„ç‰ˆæœ¬ã€‚å®ƒç±»ä¼¼äº asdfï¼Œä½†æ›´å¿«é€Ÿå’Œç®€å•ã€‚ä¸‹é¢æ˜¯ mise çš„å¸¸ç”¨å‘½ä»¤åˆ—è¡¨ï¼ŒåŒ…æ‹¬æè¿°å’Œç¤ºä¾‹ã€‚è¿™äº›å‘½ä»¤åŸºäºå®˜æ–¹æ–‡æ¡£å’Œæ‰‹å†Œæ•´ç†ã€‚

| å‘½ä»¤ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| mise install [tool]@[version] | å®‰è£…ç‰¹å®šå·¥å…·çš„ç‰ˆæœ¬ã€‚å¦‚æœæœªæŒ‡å®šï¼Œä¼šæ ¹æ®é…ç½®æ–‡ä»¶å®‰è£…ã€‚ | `mise install node@20` â€“ å®‰è£… Node.js 20 ç‰ˆæœ¬ã€‚ |
| mise use [tool]@[version] | åœ¨å½“å‰ç›®å½•æˆ–å…¨å±€è®¾ç½®å·¥å…·ç‰ˆæœ¬ï¼Œä¼šæ›´æ–° .mise.toml æ–‡ä»¶ã€‚ | `mise use python@3.11` â€“ åœ¨å½“å‰é¡¹ç›®è®¾ç½® Python 3.11ã€‚ |
| mise use --global [tool]@[version] | å…¨å±€è®¾ç½®å·¥å…·çš„é»˜è®¤ç‰ˆæœ¬ã€‚ | `mise use --global node@latest` â€“ å…¨å±€ä½¿ç”¨æœ€æ–° Node.jsã€‚ |
| mise ls | åˆ—å‡ºå·²å®‰è£…å’Œå½“å‰æ¿€æ´»çš„å·¥å…·ç‰ˆæœ¬ã€‚ | `mise ls` â€“ æ˜¾ç¤ºæ‰€æœ‰å·¥å…·çš„ç‰ˆæœ¬åˆ—è¡¨ã€‚ |
| mise ls-remote [tool] | åˆ—å‡ºå·¥å…·çš„å¯å®‰è£…ç‰ˆæœ¬ã€‚ | `mise ls-remote ruby` â€“ æ˜¾ç¤º Ruby çš„å¯ç”¨ç‰ˆæœ¬ã€‚ |
| mise exec [tool]@[version] -- [command] | ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬çš„å·¥å…·æ‰§è¡Œå‘½ä»¤ï¼Œè€Œä¸æ”¹å˜å½“å‰ç¯å¢ƒã€‚ | `mise exec node@22 -- node -v` â€“ ä½¿ç”¨ Node 22 æ£€æŸ¥ç‰ˆæœ¬ã€‚ |
| mise activate [shell] | åœ¨ shell ä¸­æ¿€æ´» miseï¼ˆä¾‹å¦‚ bashã€zsh æˆ– fishï¼‰ï¼Œä»¥è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬ã€‚ | `mise activate zsh` â€“ ä¸º zsh shell æ¿€æ´» miseã€‚ |
| mise doctor | æ£€æŸ¥ mise å®‰è£…æ˜¯å¦æ­£å¸¸ï¼Œè¯Šæ–­æ½œåœ¨é—®é¢˜ã€‚ | `mise doctor` â€“ è¿è¡Œè¯Šæ–­æ£€æŸ¥ã€‚ |
| mise prune | åˆ é™¤æœªä½¿ç”¨çš„å·¥å…·ç‰ˆæœ¬ï¼Œä»¥æ¸…ç†ç©ºé—´ã€‚ | `mise prune` â€“ ç§»é™¤æ‰€æœ‰æœªå¼•ç”¨çš„ç‰ˆæœ¬ã€‚ |
| mise self-update | æ›´æ–° mise å·¥å…·æœ¬èº«åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚ | `mise self-update` â€“ æ›´æ–° mise CLIã€‚ |
| mise alias [subcommand] | ç®¡ç†ç‰ˆæœ¬åˆ«åï¼Œä¾‹å¦‚è®¾ç½®æˆ–åˆ—å‡ºåˆ«åã€‚ | `mise alias set node lts 20.9.0` â€“ ä¸º Node LTS è®¾ç½®åˆ«åã€‚ |
| mise run [task] | æ‰§è¡Œå®šä¹‰åœ¨ .mise.toml ä¸­çš„ä»»åŠ¡ã€‚ | `mise run build` â€“ è¿è¡Œåä¸º "build" çš„ä»»åŠ¡ã€‚ |
| mise uninstall [tool]@[version] | å¸è½½ç‰¹å®šå·¥å…·ç‰ˆæœ¬ã€‚ | `mise uninstall python@3.10` â€“ ç§»é™¤ Python 3.10ã€‚`nix-env` â€”â€” ç”¨æˆ·çº§åŒ…ç®¡ç†å™¨

`nix-env` æ˜¯ **Nix åŒ…ç®¡ç†çš„ç”¨æˆ·æ¥å£**ï¼Œä¸»è¦ç”¨äº**åœ¨å½“å‰ç”¨æˆ·ç¯å¢ƒå®‰è£…ã€å‡çº§ã€å¸è½½è½¯ä»¶**ï¼Œç±»ä¼¼äº `apt install` æˆ– `brew install`ï¼Œä½†å…·å¤‡ Nix çš„ç‰¹æ€§ï¼š**ä¸ç ´åç³»ç»Ÿï¼Œç‰ˆæœ¬å¯å¹¶å­˜ï¼Œå¯å›æ»š**ã€‚

### å¸¸ç”¨æ“ä½œ

| å‘½ä»¤                          | åŠŸèƒ½                       |
| --------------------------- | ------------------------ |
| `nix-env -iA nixpkgs.<pkg>` | å®‰è£…æŸä¸ªåŒ…ï¼ˆA è¡¨ç¤ºæŒ‰å±æ€§åå®‰è£…ï¼‰        |
| `nix-env -u`                | å‡çº§å·²å®‰è£…çš„æ‰€æœ‰åŒ…                |
| `nix-env -e <pkg>`          | å¸è½½åŒ…                      |
| `nix-env -q`                | æŸ¥è¯¢å½“å‰å·²å®‰è£…çš„åŒ…                |
| `nix-env -qaP <keyword>`    | æœç´¢å¯ç”¨åŒ…ï¼ˆa è¡¨ç¤ºæ‰€æœ‰ï¼ŒP è¡¨ç¤ºæ˜¾ç¤ºå±æ€§è·¯å¾„ï¼‰ |

#### ç¤ºä¾‹

```bash
nix-env -iA nixpkgs.htop   # å®‰è£… htop
nix-env -qaP python        # æœç´¢ Python ç›¸å…³çš„åŒ…
nix-env -e htop            # å¸è½½ htop
```

> **ç‰¹ç‚¹**
>
> - å¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼Œä¸å½±å“ç³»ç»Ÿå…¶ä»–ç”¨æˆ·
>
> - å®‰è£…çš„åŒ…ä¼šæ”¾åœ¨ `~/.nix-profile`ï¼Œå¹¶é€šè¿‡ symlink é“¾æ¥åˆ° Nix store
>
> - ä¸éœ€è¦ root æƒé™
>
> - ç¼ºç‚¹ï¼šä¸å£°æ˜åŒ–ï¼Œä¸æ–¹ä¾¿ç³»ç»Ÿè¿ç§»ï¼ˆæ›´é€‚åˆä¸´æ—¶æ€§å®‰è£…ï¼‰
>

`nix-shell` â€”â€” ä¸´æ—¶å¼€å‘ç¯å¢ƒ

`nix-shell` ç”¨äº**è¿›å…¥ä¸€ä¸ªå¸¦æœ‰æŒ‡å®šä¾èµ–çš„ä¸´æ—¶ shell ç¯å¢ƒ**ï¼Œå¸¸ç”¨äºå¼€å‘æ—¶åŠ è½½ä¾èµ–è€Œä¸æ±¡æŸ“å…¨å±€ç³»ç»Ÿã€‚

### ä¸¤ç§ç”¨æ³•

#### â‘  ç›´æ¥å‘½ä»¤è¡Œä¸´æ—¶ç¯å¢ƒ

```bash
nix-shell -p python39 git
```

è¿›å…¥åï¼Œä½ ä¼šæœ‰ä¸€ä¸ªä¸´æ—¶ shellï¼Œå†…ç½® `python3.9` å’Œ `git`ã€‚é€€å‡ºåï¼Œè¿™äº›åŒ…ä¸ä¼šä¿ç•™åœ¨ç³»ç»Ÿä¸­ã€‚

#### â‘¡ ä½¿ç”¨ `shell.nix` æˆ– `default.nix`

é€‚åˆå¼€å‘é¡¹ç›®ï¼ŒæŠŠä¾èµ–å†™åœ¨ `shell.nix` é‡Œï¼Œè®©å›¢é˜Ÿæ‰€æœ‰äººè¿›å…¥ç›¸åŒç¯å¢ƒï¼š

```nix
# shell.nix
{ pkgs ? import <nixpkgs> {} }:
pkgs.mkShell {
  buildInputs = [
    pkgs.python39
    pkgs.git
  ];
}
```

ç„¶åï¼š

```bash
nix-shell   # è‡ªåŠ¨åŠ è½½ shell.nix
```

> **ç‰¹ç‚¹**
>
> - ç¯å¢ƒæ˜¯**ä¸´æ—¶çš„**ï¼Œé€€å‡ºåä¸å½±å“ç³»ç»Ÿ
>
> - éå¸¸é€‚åˆæ„å»º reproducibleï¼ˆå¯å¤ç°ï¼‰çš„å¼€å‘ç¯å¢ƒ
>
> - æ”¯æŒè‡ªåŠ¨ä¸‹è½½ã€éš”ç¦»ä¾èµ–
>
> - å¸¸ä¸ CI/CDã€ç§‘ç ”ã€å¼€æºé¡¹ç›®é…åˆ
>

ä¸‹é¢æ˜¯ **æœ€å…¨é¢ã€ç³»ç»Ÿã€è¯¦ç»†çš„ Nix æ–‡ä»¶è¯­æ³•è¯´æ˜**ï¼ˆæ¶µç›– Nix è¯­è¨€å…¨è¯­æ³•ï¼šè¡¨è¾¾å¼ç»“æ„ã€æ•°æ®ç±»å‹ã€å‡½æ•°ã€ä½œç”¨åŸŸã€ç»§æ‰¿ã€åŒ… derivationã€å¯¼å…¥ã€å­—ç¬¦ä¸²ã€å¤šè¡Œè¯­æ³•ã€è¿ç®—ç­‰ï¼‰ã€‚

è¿™æ˜¯ä¸€ä¸ª **å®Œæ•´è¯­è¨€æ•™ç¨‹çº§åˆ«** çš„è¯´æ˜ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“ä½œ Nix è¯­è¨€è¯­æ³•æ‰‹å†Œé˜…è¯»ã€‚

---

## nix è¡¨è¾¾å¼
# ğŸ§± 1. Nix è¯­è¨€åŸºç¡€ç»“æ„

Nix è¯­è¨€æ˜¯ï¼š

- **è¡¨è¾¾å¼è¯­è¨€**ï¼ˆeverything is an expressionï¼‰
    
- **çº¯å‡½æ•°å¼**ï¼ˆæ— å‰¯ä½œç”¨ï¼‰
    
- **å»¶è¿Ÿæ±‚å€¼**ï¼ˆlazy evaluationï¼‰
    

ä¸€ä¸ª `.nix` æ–‡ä»¶æœ€ç»ˆå¿…é¡»è¿”å›ä¸€ä¸ª**å€¼**ï¼Œå¯ä»¥æ˜¯ï¼š

- å­—ç¬¦ä¸²
    
- æ•°å­—
    
- å¸ƒå°”
    
- åˆ—è¡¨
    
- é›†åˆï¼ˆattribute setï¼‰
    
- æ´¾ç”Ÿï¼ˆderivationï¼‰
    
- å‡½æ•°
    

ç¤ºä¾‹ï¼š

```nix
"hello"
```

---

# ğŸ”¢ 2. æ•°æ®ç±»å‹

Nix æœ‰ä»¥ä¸‹æ•°æ®ç±»å‹ï¼š

## 2.1 å­—ç¬¦ä¸²ï¼ˆStringï¼‰

### æ™®é€šå­—ç¬¦ä¸²

```nix
"hello world"
```

### å­—ç¬¦ä¸²æ’å€¼ï¼ˆ${}ï¼‰

```nix
"${pkgs.hello}/bin/hello"
```

### å¤šè¡Œå­—ç¬¦ä¸²

```nix
''
  line1
  line2
''
```

ç¼©è¿›ä¼šè¢«ç§»é™¤ã€‚

---

## 2.2 æ•°å­—ï¼ˆIntï¼‰

æ•´æ•°ï¼š

```nix
123
```

---

## 2.3 å¸ƒå°”ï¼ˆBoolï¼‰

```nix
true
false
```

---

## 2.4 Null

```nix
null
```

---

## 2.5 åˆ—è¡¨ï¼ˆListï¼‰

```nix
[ 1 2 3 ]
[ "a" "b" ]
[ pkgs.vim pkgs.git ]
```

åˆ—è¡¨ä¸­å…ƒç´ ä»¥ç©ºæ ¼åˆ†éš”ã€‚

---

## 2.6 é›†åˆï¼ˆAttribute Setï¼‰

ç±»ä¼¼ JSON / dictã€‚

```nix
{
  name = "hello";
  version = 1;
}
```

### åµŒå¥—é›†åˆ

```nix
{
  env = {
    PATH = "/bin";
  };
}
```

### åŠ¨æ€ keyï¼ˆå­—ç¬¦ä¸²åŒ–ï¼‰

```nix
{
  "foo bar" = 123;
}
```

---

# ğŸ”ƒ 3. è¿ç®—ç¬¦

## 3.1 ç®—æ•°è¿ç®—ç¬¦

```nix
1 + 2
3 - 1
a * b
a / b
```

---

## 3.2 å¸ƒå°”è¿ç®—ç¬¦

```nix
true && false
true || false
! true
```

---

## 3.3 æ¯”è¾ƒè¿ç®—ç¬¦

```nix
1 == 1
"a" != "b"
1 < 2
```

---

## 3.4 å­—ç¬¦ä¸²æ‹¼æ¥

```nix
"hello" + "world"
```

---

## 3.5 åˆ—è¡¨è¿æ¥

```nix
[1 2] ++ [3 4]
```

---

# ğŸ§© 4. å‡½æ•°ï¼ˆFunctionï¼‰

Nix è¯­è¨€ä¸­çš„å‡½æ•°æ˜¯ **å•å‚æ•°**ï¼Œä½†å¯ä»¥æ¨¡æ‹Ÿå¤šå‚æ•°ã€‚

## 4.1 å•å‚æ•°å‡½æ•°

```nix
x: x + 1
```

è°ƒç”¨ï¼š

```nix
(x: x + 1) 10   # => 11
```

---

## 4.2 å¤šå‚æ•°ï¼ˆä½¿ç”¨ Attrset è§£æ„ï¼‰

è¿™æ˜¯ Nix æœ€å¸¸è§çš„æ¨¡å¼ï¼š

```nix
{ a, b }: a + b
```

è°ƒç”¨ï¼š

```nix
({ a = 1; b = 2; })  # => 3
```

---

## 4.3 é»˜è®¤å‚æ•°

```nix
{ a, b ? 10 }: a + b
```

---

## 4.4 å¯é€‰å‚æ•° + æ•è·å‰©ä½™å‚æ•°ï¼ˆ...ï¼‰

```nix
{ a, b, ... }:
a + b
```

ä»»æ„å¤šä½™å­—æ®µè¢«å¿½ç•¥ã€‚

---

# ğŸ§± 5. let-in ä½œç”¨åŸŸ

å±€éƒ¨å˜é‡å®šä¹‰ï¼š

```nix
let
  x = 1;
  y = 2;
in
x + y
```

---

# ğŸ§± 6. with è¯­å¥ï¼ˆæ±¡æŸ“ scope â€” è°¨æ…ä½¿ç”¨ï¼‰

```nix
with pkgs;
[ vim git ]
```

å±•å¼€ä¸ºï¼š

```nix
[ pkgs.vim pkgs.git ]
```

---

# ğŸ§± 7. inherit ç»§æ‰¿

## 7.1 ä»å½“å‰ scope ç»§æ‰¿å­—æ®µ

```nix
let
  a = 1;
  b = 2;
in {
  inherit a b;
}
```

ç›¸å½“äºï¼š

```nix
{ a = a; b = b; }
```

---

## 7.2 ä»é›†åˆç»§æ‰¿

```nix
{ inherit (pkgs) vim git; }
```

ç›¸å½“äºï¼š

```nix
{ vim = pkgs.vim; git = pkgs.git; }
```

---

# ğŸ§­ 8. å¯¼å…¥ï¼ˆimportï¼‰

## 8.1 å¯¼å…¥ä¸€ä¸ªæ–‡ä»¶

```nix
import ./file.nix
```

å¦‚æœ file.nix æ˜¯å‡½æ•°ï¼š

```nix
(import ./file.nix) { pkgs = pkgs; }
```

---

# ğŸ§ª 9. if-then-else

```nix
if condition then expr1 else expr2
```

---

# ğŸ§± 10. é€‰æ‹©å™¨ï¼ˆAttrset Accessï¼‰

## 10.1 ç‚¹è®¿é—®

```nix
pkgs.git
```

## 10.2 åŠ¨æ€ key

```nix
myset.${key}
```

---

# ğŸ§© 11. æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆIndented Stringsï¼‰é«˜çº§è¯­æ³•

### å†…æ’è¡¨è¾¾å¼ä¸­å…è®¸ Nix è¯­æ³•

```nix
"result: ${builtins.toString (1 + 2)}"
```

---

# ğŸ”§ 12. builtins å†…å»ºå‡½æ•°

å¸¸ç”¨ï¼š

- `builtins.toString`
    
- `builtins.length`
    
- `builtins.attrNames`
    
- `builtins.readFile`
    
- `builtins.fetchTarball`
    
- `builtins.filter`
    
- `builtins.map`
    
- `builtins.path`
    
- `builtins.getEnv`
    

ç¤ºä¾‹ï¼š

```nix
builtins.length [1 2 3]   # => 3
```

---

# ğŸ—ï¸ 13. Derivationï¼ˆæ„å»ºåŒ…ï¼‰

æ ¸å¿ƒæ„å»ºè¡¨è¾¾å¼ï¼š

```nix
stdenv.mkDerivation {
  pname = "hello";
  version = "1.0";
  src = ./.;
}
```

æ¯ä¸ªå­—æ®µéƒ½æ˜¯ä¸€ä¸ª Nix è¡¨è¾¾å¼ã€‚

---

# ğŸ§± 14. æ–‡ä»¶è·¯å¾„è¯­æ³•

```nix
./file
../src
/foo/bar
```

---

# ğŸ§Š 15. Flake æ–‡ä»¶è¯­æ³•ï¼ˆflake.nixï¼‰

æ ¸å¿ƒç»“æ„ï¼š

```nix
{
  description = "Example";

  inputs = {
    nixpkgs.url = "github:nixos/nixpkgs";
  };

  outputs = { self, nixpkgs }: {
    packages.x86_64-linux.default =
      nixpkgs.legacyPackages.x86_64-linux.hello;
  };
}
```

---

# ğŸ§© 16. å®Œæ•´è¯­æ³•ä¾‹å­ï¼ˆç»¼åˆä½¿ç”¨ï¼‰

```nix
{ pkgs ? import <nixpkgs> {} }:

let
  version = "1.0";
in

pkgs.stdenv.mkDerivation {
  pname = "demo";
  inherit version;

  src = ./src;

  buildInputs = with pkgs; [ gcc ];

  installPhase = ''
    mkdir -p $out/bin
    cp demo $out/bin/
  '';
}
```