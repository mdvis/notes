好的，Linux 系统提供了非常丰富和强大的网络命令集，用于配置网络、排查故障和监控流量。下面我将这些命令分为几类，并附上每个命令的简介、常用选项和示例，方便你理解和记忆。

---

### 一、网络配置与信息查看

这类命令用于查看和配置网络接口参数，如 IP 地址、子网掩码、网关等。

#### 1. `ip` - **全能网络配置工具** (推荐使用)
`ip` 命令是新一代的多功能网络配置工具，旨在取代老旧的 `ifconfig`、`route` 等命令。

*   **常用子命令：**
    *   `ip addr` 或 `ip a`: 查看和管理网络接口的 IP 地址。
    *   `ip link`: 查看和管理网络接口的状态（如启用/禁用）。
    *   `ip route` 或 `ip r`: 查看和管理路由表。
    *   `ip neigh`: 查看和管理 ARP 表（邻居缓存）。

*   **示例：**
    ```bash
    # 查看所有网络接口信息（IP、MAC、状态）
    ip addr show

    # 启用 eth0 接口
    ip link set eth0 up

    # 为 eth0 接口添加一个 IP 地址
    ip addr add 192.168.1.100/24 dev eth0

    # 查看系统路由表
    ip route show
    ```

#### 2. `ifconfig` - **接口配置** (已逐渐被 `ip` 取代，但很多系统仍保留)
传统的网络接口配置命令，简单直观。

*   **示例：**
    ```bash
    # 查看所有接口信息
    ifconfig

    # 启用/禁用 eth0 接口
    ifconfig eth0 up
    ifconfig eth0 down

    # 为 eth0 设置临时 IP 地址
    ifconfig eth0 192.168.1.100 netmask 255.255.255.0
    ```

#### 3. `ss` - **查看网络连接和套接字统计** (推荐使用)
用于转储套接字统计信息，可以替代古老的 `netstat` 命令，速度更快，信息更详细。

*   **常用选项：**
    *   `-t`: TCP 连接
    *   `-u`: UDP 连接
    *   `-l`: 监听状态的套接字
    *   `-n`: 以数字形式显示端口和地址（不解析域名和服务名）
    *   `-p`: 显示使用套接字的进程信息
    *   `-a`: 显示所有套接字
    *   `-4`: 仅 IPv4
    *   `-6`: 仅 IPv6

*   **示例：**
    ```bash
    # 显示所有建立的 TCP 连接
    ss -tna

    # 显示所有监听中的 TCP 端口以及对应的进程名
    ss -tlnp

    # 显示所有 UDP 连接
    ss -una
    ```

#### 4. `netstat` - **网络统计** (老牌命令，逐渐被 `ss` 取代)
功能与 `ss` 类似，但输出格式更友好，在一些简单场景下仍然常用。

*   **常用选项：** (与 `ss` 类似)
    *   `-t`, `-u`, `-l`, `-n`, `-p`

*   **示例：**
    ```bash
    # 显示所有监听端口
    netstat -tlnp

    # 显示路由表
    netstat -r
    ```

---

### 二、连通性测试

这类命令用于测试主机之间的网络是否通畅。

#### 5. `ping` - **测试网络连通性**
向目标主机发送 ICMP Echo 请求包，用于检查网络是否通畅以及延迟情况。

*   **常用选项：**
    *   `-c <次数>`: 指定发送包的数量后停止。例如 `ping -c 4 google.com`
    *   `-i <间隔>`: 设置发送包之间的间隔时间（秒）。
    *   `-s <大小>`: 指定要发送的数据字节数。

*   **示例：**
    ```bash
    # 测试与谷歌的连通性，发送 4 个包后停止
    ping -c 4 google.com
    ```

#### 6. `traceroute` / `tracepath` - **追踪数据包路径**
显示数据包从本机到目标主机所经过的所有路由节点（跳数），用于诊断网络在何处出现故障。

*   **`traceroute`** 功能更强大，可能需要 root 权限。
*   **`tracepath`** 无需 root 权限，但功能稍弱。

*   **示例：**
    ```bash
    # 追踪到 google.com 的路径
    traceroute google.com
    tracepath google.com
    ```

---

### 三、网络诊断与高级工具

#### 7. `dig` - **DNS 查询诊断工具** (推荐使用)
强大的 DNS 查询工具，用于排查域名解析问题，输出信息非常详细。

*   **常用选项：**
    *   `@<DNS服务器>`: 指定查询使用的 DNS 服务器，如 `dig @8.8.8.8 google.com`
    *   `+short`: 只显示简短的结果（通常是 IP 地址）。

*   **示例：**
    ```bash
    # 查询 google.com 的 A 记录
    dig google.com

    # 使用谷歌的 DNS 查询，并只显示简洁结果
    dig @8.8.8.8 google.com +short

    # 查询 MX 记录（邮件交换记录）
    dig google.com MX
    ```

#### 8. `nslookup` - **查询域名解析** (交互式，较老)
另一个用于查询 DNS 的命令，现在更推荐使用 `dig`。

*   **示例：**
    ```bash
    # 交互式模式
    nslookup
    > server 8.8.8.8
    > google.com
    > exit

    # 非交互式模式
    nslookup google.com 8.8.8.8
    ```

#### 9. `host` - **简单的 DNS 查询**
一个简单的用于执行 DNS 查找的实用程序，通常用于将名称转换为 IP 地址或将 IP 地址转换为名称。

*   **示例：**
    ```bash
    host google.com
    host 8.8.8.8
    ```

#### 10. `whois` - **查询域名信息**
用于查询域名的注册信息，如注册人、注册商、注册日期和过期日期等。

*   **示例：**
    ```bash
    whois google.com
    ```

#### 11. `curl` - **数据传输工具**
一个利用 URL 语法在命令行下工作的文件传输工具，支持多种协议（HTTP, HTTPS, FTP, FTPS, SCP, SFTP 等），常用于测试 Web 服务、下载文件、API 调用等。

*   **常用选项：**
    *   `-I` 或 `--head`: 仅获取 HTTP 头部信息。
    *   `-o <文件>`: 将输出写入到指定文件。
    *   `-v`: 显示详细的操作信息（verbose），用于调试。
    *   `-X <方法>`: 指定请求方法（如 GET, POST）。

*   **示例：**
    ```bash
    # 获取网页内容并输出到终端
    curl https://www.example.com

    # 仅查看 HTTP 响应头
    curl -I https://www.example.com

    # 下载文件
    curl -o filename.zip http://example.com/file.zip
    ```

#### 12. `wget` - **非交互式网络下载器**
另一个强大的下载工具，特点是非常适合递归下载（整个网站）和从命令行后台运行。

*   **常用选项：**
    *   `-c`: 断点续传。
    *   `-r`: 递归下载。
    *   `-P <目录>`: 指定下载目录。

*   **示例：**
    ```bash
    # 下载文件
    wget http://example.com/file.iso

    # 断点续传
    wget -c http://example.com/big-file.iso
    ```

#### 13. `tcpdump` - **强大的命令行抓包工具**
网络抓包和分析的神器，允许用户拦截和显示发送或收到过网络连接的 TCP/IP 及其他数据包。

*   **常用选项：**
    *   `-i <接口>`: 指定监听的网络接口（如 `eth0`, `any`）。
    *   `-n`: 不把地址转换成名字（主机地址、端口号等）。
    *   `-c <数量>`: 捕获指定数量的数据包后退出。
    *   `port <端口号>`: 只捕获指定端口的数据包。
    *   `host <IP地址>`: 只捕获和指定主机交互的数据包。
    *   `-w <文件>`: 将原始数据包写入文件，而不是解析和打印出来。
    *   `-r <文件>`: 从文件中读取数据包（用 `-w` 捕获的）。

*   **示例：**
    ```bash
    # 监听 eth0 接口的所有流量
    sudo tcpdump -i eth0

    # 监听所有接口，捕获 10 个与主机 8.8.8.8 相关的包，并以数字形式显示
    sudo tcpdump -i any -c 10 -n host 8.8.8.8

    # 捕获所有目标端口是 80 或 443 的 HTTP/HTTPS 流量
    sudo tcpdump -i any 'port 80 or port 443'
    ```

---

### 四、连接远程主机

#### 14. `ssh` - **安全外壳协议**
通过加密的连接远程登录到另一台主机，是管理 Linux 服务器的标配工具。

*   **基本用法：** `ssh user@hostname`
*   **常用选项：**
    *   `-p <端口>`: 指定远程主机的 SSH 端口（默认为 22）。
    *   `-i <私钥文件>`: 指定用于身份验证的私钥文件。

*   **示例：**
    ```bash
    # 以用户 alice 登录到 server.example.com
    ssh alice@server.example.com

    # 使用特定端口和密钥文件登录
    ssh -p 2222 -i ~/.ssh/my_key user@host
    ```

---

### 总结与实践建议

| 命令 | 主要用途 | 备注 |
| :--- | :--- | :--- |
| `ip` | **查看和配置**网络接口、路由 | **新时代主力**，必学 |
| `ss` / `netstat` | **查看网络连接**和端口监听状态 | `ss` 更快更现代 |
| `ping` | **测试基础连通性**和延迟 | 最常用 |
| `traceroute` | **追踪网络路径**，定位故障点 |  |
| `dig` / `nslookup` | **DNS 查询和诊断** | `dig` 更强大 |
| `curl` / `wget` | **下载文件**、**测试 Web 服务** | API 调试常用 `curl` |
| `tcpdump` | **网络抓包**，**高级故障诊断** | 高手必备 |
| `ssh` | **安全远程登录**服务器 | 运维基础 |

**故障排查思路：**
1.  **本地配置：** `ip addr` 或 `ifconfig` 检查 IP 是否正确。
2.  **本地路由：** `ip route` 检查网关是否正确。
3.  **基础连通性：** `ping 网关IP` -> `ping 外网IP` (如 `8.8.8.8`)。
4.  **DNS 解析：** 如果能 `ping 8.8.8.8` 但不能 `ping google.com`，用 `dig google.com` 查 DNS。
5.  **远程服务端口：** `telnet <IP> <端口>` 或 `curl -v` 测试具体服务是否可达。
6.  **高级诊断：** 使用 `tcpdump` 抓包分析。