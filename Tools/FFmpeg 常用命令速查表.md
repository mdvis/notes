`-i <file>` è¾“å…¥æ–‡ä»¶
`-y` å¼ºåˆ¶è¦†ç›–æ–‡ä»¶
`-n` ç¦æ­¢è¦†ç›–æ–‡ä»¶
`-f` å¼ºåˆ¶è¾“å…¥/è¾“å‡ºæ ¼å¼
- `-f <type> -i <file>` è¾“å…¥
- `-f <type> <file>` è¾“å‡º
`-acodec` / `-c:a` æŒ‡å®šéŸ³é¢‘è§£ç å™¨
`-vcodec` / `-c:v` æŒ‡å®šè§†é¢‘è§£ç å™¨
`-protocol_whitelist` å…è®¸çš„ç½‘ç»œåè®®ï¼Œé™åˆ¶è¾“å…¥è¾“å‡ºæºçš„åè®®ç±»å‹
## ğŸ“‚ åŸºç¡€ä¿¡æ¯
```bash
# æŸ¥çœ‹åª’ä½“æ–‡ä»¶ä¿¡æ¯
ffmpeg -i input.mp4
```
### æŸ¥è¯¢æ”¯æŒçš„åŠŸèƒ½
```
ffmpeg -formats æŸ¥çœ‹æ”¯æŒçš„æ ¼å¼
ffmpeg -codecs æŸ¥çœ‹æ”¯æŒçš„ç¼–è§£ç å™¨
ffmpeg -filters æ»¤é•œ
ffmpeg -protocols åè®®
ffmpeg -devices æŸ¥è¯¢è®¾å¤‡æ”¯æŒ
ffmpeg -buildconf æŸ¥çœ‹ç¼–è¯‘æ—¶æ”¯æŒçš„åº“
```
## ğŸ¬ è§†é¢‘å¤„ç†
### 1. æ ¼å¼è½¬æ¢
```bash
# MP4 â†’ MKVï¼ˆä»…è½¬å°è£…ï¼Œä¸é‡æ–°ç¼–ç ï¼Œé€Ÿåº¦å¿«ã€æ— æŸï¼‰
ffmpeg -i input.mp4 -c copy output.mkv
```
### 2. è§†é¢‘å‹ç¼©
```bash
# å‹ç¼©ä¸º H.264ï¼Œé™ä½æ¯”ç‰¹ç‡
ffmpeg -i input.mp4 -vcodec libx264 -crf 23 -preset fast -acodec aac output.mp4
# crfï¼šè´¨é‡æ§åˆ¶ï¼Œ0=æ— æŸï¼Œ18~28 å¸¸ç”¨ï¼ˆæ•°å€¼è¶Šå¤§ä½“ç§¯è¶Šå°ï¼Œè´¨é‡è¶Šå·®ï¼‰
```
### 3. è£å‰ªç‰‡æ®µ
```bash
# ä» 00:01:00 å¼€å§‹ï¼Œæˆªå– 30 ç§’
ffmpeg -ss 00:01:00 -i input.mp4 -t 30 -c copy output.mp4
```
### 4. æ”¹å˜åˆ†è¾¨ç‡/å¸§ç‡
```bash
# 4K â†’ 1080p
ffmpeg -i input.mp4 -vf scale=1920:1080 output.mp4
# æ”¹ä¸º 30fps
ffmpeg -i input.mp4 -r 30 output.mp4
```
### 5. æ·»åŠ æ°´å°
```bash
ffmpeg -i input.mp4 -i logo.png -filter_complex "overlay=10:10" output.mp4
```
---
## ğŸµ éŸ³é¢‘å¤„ç†
### 1. æå–éŸ³é¢‘
```bash
ffmpeg -i input.mp4 -vn -acodec copy output.aac
```
### 2. æ ¼å¼è½¬æ¢
```bash
ffmpeg -i input.wav -acodec mp3 output.mp3
```
### 3. è£å‰ªéŸ³é¢‘
```bash
ffmpeg -ss 00:00:30 -t 15 -i input.mp3 output.mp3
```
### 4. æ”¹å˜éŸ³é‡
```bash
# æé«˜ä¸€å€éŸ³é‡
ffmpeg -i input.mp3 -filter:a "volume=2.0" output.mp3
```
## ğŸ“œ å­—å¹•å¤„ç†
### 1. æ·»åŠ å¤–æŒ‚å­—å¹•ï¼ˆçƒ§å½•åˆ°ç”»é¢é‡Œï¼‰
```bash
ffmpeg -i input.mp4 -vf subtitles=subtitles.srt output.mp4
```
### 2. æå–å­—å¹•æµ
```bash
ffmpeg -i input.mkv -map 0:s:0 subs.srt
```
## ğŸ”— æ–‡ä»¶åˆå¹¶
### 1. æ— æŸåˆå¹¶ï¼ˆæ ¼å¼å’Œç¼–ç ä¸€è‡´ï¼‰
```bash
# åˆ›å»º file_list.txt æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
# file 'part1.mp4'
# file 'part2.mp4'
ffmpeg -f concat -safe 0 -i file_list.txt -c copy output.mp4
```

```
ffmpeg -i file -i file --fi
```
### 2. é‡æ–°ç¼–ç åˆå¹¶
```bash
ffmpeg -i part1.mp4 -i part2.mp4 -filter_complex "[0:v][0:a][1:v][1:a]concat=n=2:v=1:a=1" output.mp4
```
## ğŸŒ æµåª’ä½“
### 1. ä¸‹è½½ HLS æµï¼ˆ.m3u8ï¼‰
```bash
ffmpeg -i "http://example.com/playlist.m3u8" -c copy output.mp4
```
### 2. æ¨æµåˆ° RTMP æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ç›´æ’­ï¼‰
```bash
ffmpeg -re -i input.mp4 -c copy -f flv rtmp://server/live/streamkey
```
## ğŸ“¸ æˆªå›¾
```bash
# æå–ä¸€å¸§ç”»é¢
ffmpeg -i input.mp4 -ss 00:00:05 -vframes 1 frame.jpg
# æ¯ç§’å¯¼å‡ºä¸€å¸§
ffmpeg -i input.mp4 -vf fps=1 frame_%04d.jpg
```
## âœ… æ€»ç»“
- **æ ¼å¼è½¬æ¢** â†’ `-c copy`ï¼ˆæ— æŸï¼‰ã€`-crf`ï¼ˆå‹ç¼©è´¨é‡æ§åˆ¶ï¼‰
- **è£å‰ª/æ‹¼æ¥** â†’ `-ss`ã€`-t`ã€concat
- **å­—å¹•** â†’ `-vf subtitles=`
- **æµåª’ä½“** â†’ ä¸‹è½½/æ¨æµ
- **æˆªå›¾** â†’ `-vf fps`
## ç¼–ç è§£ç å™¨
- `-c:v <ç¼–ç å™¨>` æŒ‡å®šè§†é¢‘ç¼–ç å™¨
- `-c:a <ç¼–ç å™¨>` æŒ‡å®šéŸ³é¢‘ç¼–ç å™¨
	 - å¸¸ç”¨å€¼
		 - copy: ç›´æ¥å¤åˆ¶æµï¼Œä¸é‡æ–°ç¼–ç 
		 - libx264: H.264 è§†é¢‘ç¼–ç 
		 - aac: AAC éŸ³é¢‘ç¼–ç 
```bash
ffmpeg -i input.mp4 -c:v libx264 -c:a aac output.mp4
```

- `-b:v <æ¯”ç‰¹ç‡>` è®¾ç½®è§†é¢‘æ¯”ç‰¹ç‡
- `-b:a <æ¯”ç‰¹ç‡>` è®¾ç½®éŸ³é¢‘æ¯”ç‰¹ç‡
	- è§†é¢‘å¸¸ç”¨å€¼
		- 128k(bps) æ™®é€š
		- 192/256k(bps) è¾ƒé«˜éŸ³è´¨
		- 320k(bps) æ¥è¿‘æ— æŸ
	- éŸ³é¢‘å¸¸ç”¨å€¼
		- 500-1500k(bps) æ ‡æ¸…(480p)
		- 1500-4000k(bps) é«˜æ¸…(720p)
		- 3000-8000k(bps) å…¨é«˜æ¸…(1080p)
		- 15000-40000k(bps) è¶…é«˜æ¸…(4k)
##  ç¼–ç å‚æ•°ä¸è´¨é‡æ§åˆ¶
- `-crf` æ’å®šè´¨é‡å› å­ï¼ˆ0-51ï¼‰ï¼Œå€¼è¶Šä½è´¨é‡è¶Šé«˜ï¼Œæ–‡ä»¶è¶Šå¤§ï¼Œå¸¸ç”¨äº H.264/H.265 ç¼–ç ï¼Œæ¨èå€¼18-28ï¼ˆ23 ä¸ºé»˜è®¤å¹³è¡¡å€¼ï¼‰
- `-preset` å¹³è¡¡ç¼–ç é€Ÿåº¦ä¸å‹ç¼©æ•ˆç‡ï¼Œå¯é€‰Â `ultrafast`ï¼ˆæé€Ÿä½è´¨ï¼‰åˆ°Â `veryslow`ï¼ˆææ…¢é«˜è´¨ï¼‰
## æ—¶é—´å®šä½ä¸æˆªå–
* `-ss <æ—¶é—´>` å®šä½åˆ°è¾“å…¥æ–‡ä»¶çš„æŒ‡å®šæ—¶é—´ç‚¹ï¼Œå€¼ä¸º `ç§’æ•°` æˆ– `hh:mm:ss` æ ¼å¼
* `-t <æ—¶é•¿>` æˆªå–æŒ‡å®šæ—¶é•¿
* `-to <æ—¶é—´>` æˆªå–åˆ°æŒ‡å®šæ—¶é—´
## æ—¶é—´æ§åˆ¶ä¸åŒæ­¥
- `-itsoffset` è®¾ç½®è¾“å…¥çš„æ—¶é—´åç§»ï¼Œç”¨äºæ ¡æ­£éŸ³è§†é¢‘åŒæ­¥é—®é¢˜
- `-shortest` ä»¥æœ€çŸ­æµçš„æ—¶é•¿ç»“æŸè¾“å‡ºï¼Œå¸¸ç”¨äºåˆå¹¶éŸ³è§†é¢‘æ—¶å¼ºåˆ¶åŒæ­¥
- `-vsync` æ§åˆ¶è§†é¢‘å¸§åŒæ­¥æ¨¡å¼ï¼Œè§£å†³å¸§ç‡ä¸åŒ¹é…æˆ–æ—¶é—´æˆ³è·³è·ƒé—®é¢˜ã€‚ å¤„ç†ä¸åŒå¸§ç‡çš„è¾“å…¥æºæˆ–éœ€è¦å›ºå®šè¾“å‡ºå¸§ç‡
	- å¸¸ç”¨æ¨¡å¼
		- 0(passthrough)ï¼šç›´æ¥å¤åˆ¶è¾“å…¥æ—¶é—´æˆ³ï¼Œå¯èƒ½å¯¼è‡´ä¸¢å¸§æˆ–é‡å¤
		- 1(cfr - æ’å®šå¸§ç‡)ï¼šé€šè¿‡æ’å€¼æˆ–ä¸¢å¸§å¼ºåˆ¶å›ºå®šå¸§ç‡
		- 2(vfr - å¯å˜é¢‘ç‡)ï¼šä¿ç•™åŸå§‹æ—¶é—´æˆ³ï¼Œé€‚ç”¨äºåŠ¨æ€å¸§ç‡åœºæ™¯
```bash
ffmpeg -itsoffset 2 -i audio.mp3 # å»¶è¿ŸéŸ³é¢‘ä¸¤ç§’
ffmpeg -i input.mp4 -vsync 1 output.mp4
```
## æµå¤„ç†ä¸è¿‡æ»¤ã€æ˜ å°„
* `-vn` ç¦ç”¨è§†é¢‘æµ
* `-an` ç¦ç”¨éŸ³é¢‘æµ
```bash
# æå–çº¯éŸ³é¢‘
ffmpeg -i input.mp4 -vn -c:a copy output.acc
```
* `-vf <æ»¤é•œ>` åº”ç”¨è§†é¢‘æ»¤é•œ 
* `-af <æ»¤é•œ>` åº”ç”¨éŸ³é¢‘æ»¤é•œ 
	- å¸¸ç”¨æ»¤é•œ
		- scale=å®½:é«˜: è°ƒæ•´åˆ†è¾¨ç‡,`scale=640:-1` ä¿æŒæ¯”ä¾‹
		- setpts=è¡¨è¾¾å¼: è°ƒæ•´æ—¶é—´æˆ³(è§†é¢‘)
		- asetpts=è¡¨è¾¾å¼: è°ƒæ•´æ—¶é—´æˆ³(éŸ³é¢‘)
- `-map` ç²¾ç¡®æ§åˆ¶è¾“å…¥æµåˆ°è¾“å‡ºæµçš„æ˜ å°„ï¼Œæ”¯æŒé€‰æ‹©/æ’é™¤ç‰¹å®šæµï¼ˆå¦‚éŸ³é¢‘æµã€è§†é¢‘æµã€å­—å¹•æµç­‰ï¼‰
- `-bsf` æ˜¯æ¯”ç‰¹æµè¿‡æ»¤å™¨ï¼ˆBitstream Filterï¼‰çš„ç¼©å†™ã€‚å®ƒç”¨äºåœ¨ç¼–ç åã€å°è£…å‰å¯¹ç¼–ç æ¯”ç‰¹æµè¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚å»é™¤å¤šä½™çš„å…ƒæ•°æ®ã€ä¿®å¤æ¯”ç‰¹æµä¸­çš„é”™è¯¯ç­‰
```bash
ffmpeg -i input.mp4 -vf "scale=1280:720" output.mp4
# é‡ç½®éŸ³é¢‘æ—¶é—´æˆ³
ffmpeg -i input.mp4 -af "asetpts=N/SR/TB" output.mp4

# æå–è¾“å…¥çš„æ–‡ä»¶ä¸­ç´¢å¼•ä¸º 0 æ–‡ä»¶çš„è§†é¢‘æµ
ffmpeg -i input.mp4 -map 0:v output.mp4
# æ’é™¤è¾“å…¥çš„æ–‡ä»¶ä¸­ç´¢å¼•ä¸º 0 æ–‡ä»¶çš„éŸ³é¢‘æµ
ffmpeg -i input.mp4 -map -0:a output.mp4

ffmpeg -i input.mp4 -c:v copy -bsf:v h264_mp4toannexb output.h264
```
## æ ¼å¼è½¬æ¢ä¸å‚æ•°è°ƒæ•´
å¸§ç‡ 24fps(ç”µå½±è¡Œä¸š)ã€30fps(ç”µè§†ï¼Œç½‘ç»œè§†é¢‘)ã€60fps(æ¸¸æˆï¼Œä½“è‚²èµ›äº‹ç›´æ’­)ã€120fpsä»¥ä¸Š(ä¸“ä¸šé«˜é€Ÿæ‘„å½±)
é‡‡æ ·ç‡ 8000Hz(ç”µè¯)ã€44100Hz(CD)ã€48000Hz(æ•°å­—éŸ³é¢‘å¹¿æ’­ï¼Œå½±è§†åˆ¶ä½œç­‰)ã€96000Hzæ›´é«˜(ä¸“ä¸šéŸ³é¢‘åˆ¶ä½œï¼Œæ¯å¸¦å¤„ç†ç­‰)
å£°é“æ•° Monoï¼ˆå•å£°é“ï¼‰Stereoï¼ˆåŒå£°é“ï¼‰5.1 å£°é“ 7.1 å£°é“
- `-r <å¸§ç‡>`: è®¾ç½®è¾“å‡ºè§†é¢‘å¸§ç‡ï¼Œè€ç‰ˆæœ¬ä¸º `-fps`
```
ffmpeg -i input.mp4 -r 30 output.mp4
```
- `-ar <é‡‡æ ·ç‡>` è®¾ç½®éŸ³é¢‘é‡‡æ ·ç‡
- `-ac <å£°é“æ•°>` è®¾ç½®éŸ³é¢‘å£°é“æ•°
```bash
ffmpeg -i input.wav -ar 48000 -ac 2 output.mp3
```
## ç¡¬ä»¶åŠ é€Ÿ
- `-hwaccel <è®¾å¤‡>` å¯ç”¨ç¡¬ä»¶åŠ é€Ÿï¼ˆéœ€æ˜¾å¡æ”¯æŒï¼‰
```bash
ffmpeg -hwaccel cuda -i input.mp4 -c:v h264_nvenc output.mp4
```
## æ—¥å¿—ä¸è°ƒè¯•
- `-loglevel <çº§åˆ«>` è®¾ç½®æ—¥è®°çº§åˆ«ï¼ˆwarning,error,debugç­‰)
```bash
ffmpeg -loglevel error -i input.mp4 output.avi
```
- `-hide_banner` éšè— ffmpeg ç‰ˆæœ¬å’Œç¼–è¯‘ä¿¡æ¯
## å…¸å‹äº‹ä¾‹
```bash
# åˆå¹¶è§†é¢‘å’ŒéŸ³é¢‘
ffmpeg -i video.mp4 -i audio.wav -c:v copy -c:a aac output.mp4

# æå– PCM éŸ³é¢‘
ffmpeg -i input.mp4 -vn -ar 44100 -ac 2 -f s16le output.pcm
```
## å…ƒæ•°æ®ä¸æ ¼å¼æ§åˆ¶
- `-metadata` è®¾ç½®å…ƒæ•°æ®ï¼ˆå¦‚æ ‡é¢˜ã€ä½œè€…ï¼‰
- `-map_metadata` å¤åˆ¶å…ƒæ•°æ®ï¼ˆå¦‚æ ‡é¢˜ã€ä½œè€…ï¼‰
- `-pix_fmt` è®¾ç½®æˆ–å¤åˆ¶å…ƒæ•°æ®ï¼ˆå¦‚æ ‡é¢˜ã€ä½œè€…ï¼‰
```bash
# -metadata title="My Video" è®¾ç½®æ ‡é¢˜  
# -map_metadata 0 å¤åˆ¶è¾“å…¥æ–‡ä»¶çš„å…ƒæ•°æ®  
ffmpeg -metadata title="My Video" -map_metadata 0
```
## ç‰¹æ®Šå¤„ç†ä¸é™åˆ¶
- `-strict` è®¾ç½®ç¼–è§£ç å™¨å…¼å®¹æ€§ï¼ˆå¦‚Â `-strict -2`Â å…è®¸å®éªŒæ€§ç¼–è§£ç å™¨ï¼‰
- `-vframes` é™åˆ¶è¾“å‡ºè§†é¢‘çš„å¸§æ•°ï¼ˆå¦‚æˆªå–å‰ 100 å¸§ï¼‰