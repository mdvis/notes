**表结构设计要合理**：尽量避免不必要的字段，数据能拆分则拆分。
**索引要高效**：设计合理的索引结构，避免索引失效。
**SQL要优化**：查询条件精准，尽量减少全表扫描。
**分库分表**：通过水平拆分、垂直拆分减少单表数据量。
**缓存和异步化**：减少对数据库的直接压力。

## 表结构优化
1. 精简字段类型（字段类型决定存储大小和查询性能）
	1. INT or BIGINT
	2. VARCHAR(200) or TEXT
	3. TIMESTAMP/DATETIME or CHAR/VARCHAR
2. 表拆分
	1. 垂直拆分（表中字段不宜过多，多个字段拆分在多个表）
	2. 水平拆分（大量数据拆分多个表）
```sql
orders_0 -- 存user_id % 2 = 0的订单
orders_1 -- 存user_id % 2 = 1的订单
```
## 索引优化
1. 为高频查询字段创建索引（复合索引）
2. 避免索引失效
	1. 不要对索引字段使用函数或运算
	2. 注意隐式类型转换
## SQL 优化
1. 减少查询字段（`避免 select *`）
2. 分页优化
```sql
-- 深度分页时，使用“延迟游标”的方式避免扫描过多数据。
-- 深分页（性能较差）
SELECT * FROM orders ORDER BY order_time DESC LIMIT 9990, 10;
-- 优化：使用游标
SELECT * FROM orders WHERE order_time < '2023-01-01 12:00:00' ORDER BY order_time DESC LIMIT 10;
```
## 分库分表
1. 水平分库分表
	- 按用户 ID 去模
	- 按时间分区
## 缓存与异步化
1. redis 缓存热点数据
2. 消息队列异步处理写操作