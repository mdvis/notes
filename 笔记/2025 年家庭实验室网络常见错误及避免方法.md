### 2025 年家庭实验室网络常见错误及避免方法

本文讨论了家庭实验室（Home Lab）网络设计中的 10 大常见错误，这些错误可能导致性能、安全和管理问题。以下是每个错误的简要描述及关键建议：

1. **将所有设备置于单一平面网络**  
   这会造成安全隐患（如 IoT 设备访问管理接口）、性能问题（如广播风暴）和管理困难。  
   **建议**：使用 VLAN 分段，至少创建三个：管理网络、生产/实验负载网络、IoT/访客网络。从简单设计开始，并在 Proxmox 中配置默认桥接。

2. **忽略 DNS 冗余和控制**  
   依赖 ISP DNS 限制自定义记录，单一自托管 DNS 服务器则易成单点故障。  
   **建议**：运行多个 DNS 服务器（如两个 Pi-hole 实例，使用 Nebula Sync 同步，或结合 Keepalived 实现 IP 故障转移）。

3. **VLAN 设计过于复杂**  
   创建过多 VLAN（如为每个设备类型单独一个）导致规则复杂、难以维护。  
   **建议**：从少数实用分段开始，逐步优化，避免无谓增加。

4. **缺乏网络监控和可见性**  
   忽略流量监控，可能错过饱和链路或异常容器。  
   **建议**：使用 Unifi Network Application 或 Netdata、Prometheus、Grafana 等工具；在交换机上启用 SNMP 集成。

5. **忽略电源和冗余**  
   只为服务器配备 UPS，而忽略网络设备，导致断电时孤立服务器。  
   **建议**：将网络设备（如交换机、防火墙）也置于 UPS 上；预算允许时，使用双电源交换机连接两个 UPS。

6. **直接将服务暴露到互联网**  
   易遭攻击，即使安全配置也可能被新漏洞利用。  
   **建议**：使用 VPN 或零信任解决方案（如 Cloudflare Tunnels、Tailscale 或 WireGuard），避免直接暴露端口。

7. **跳过固件和软件更新**  
   忽略更新会留下漏洞，攻击者可利用防火墙后门。  
   **建议**：每几个月检查路由器、防火墙和接入点的固件更新；启用 Unifi 等厂商的自动过程，并在 Proxmox/VMware 中更新软件。

8. **忽略混合实验室中的 Wi-Fi 设计**  
   将 Wi-Fi 视为次要，单一接入点或未标记 SSID 到 VLAN 会破坏分段。  
   **建议**：将 SSID 标记到 VLAN，支持快速漫游；战略放置接入点，使用 Unifi 热图规划通道。

9. **未记录网络拓扑**  
   缺乏文档使新环境引入或复杂管理困难。  
   **建议**：使用 draw.io 或 Excalidraw 创建简单图表；在电子表格中跟踪 VLAN ID、子网和设备角色；采用 phpIPAM 或 Netbox 等工具，并准备打印备份。

10. **忽略未来带宽需求**  
    局限于 1 Gbps 设备，无法支持高速互联网或存储需求。  
    **建议**：选择带有 2.5 GbE 端口的交换机；为存储骨干考虑 10 GbE，提前规划以节省成本。